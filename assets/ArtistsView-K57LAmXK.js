import{ac as k,z as D,y as v,ad as C,ae as A,c as r,a as e,b as o,w as n,F as _,r as f,u as s,af as x,ag as F,o as i,E as p,C as w,t as d,g as m,h as $,ah as B,B as S,ai as T,aj as j,d as I}from"./index-iKGXzdRM.js";import{_ as V}from"./BannerComponent-nO8tWJzD.js";import{a as W,b as L,_ as N}from"./HoverCardContent-i_Gq3uoY.js";import{_ as z,a as R,b as q,c as E,d as M}from"./PaginationPrev-pKbtQBiv.js";import{u as P,a as J}from"./useDarkAlert-dvxp3b33.js";import"./more-horizontal-BI5Ng5To.js";const O={class:"container relative pb-[128px] lg:pb-[192px]"},U={class:"grid grid-flow-col"},Z={class:"mb-4 lg:mb-14"},G={class:"w-full flex flex-wrap gap-4"},H=["onClick"],K={class:"w-[100%] mx-auto grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"},Q=["src","alt"],X={class:"ml-4"},Y={class:"pr-3"},tt={class:"text-lg md:text-xl"},at={class:"text-sm text-black-60"},st={class:"text-sm text-black-60"},et=["onClick"],ot=e("hr",{class:"border-b-2 border-black-60"},null,-1),{setIsLoading:b}=k(),{swalWithStylingButtons:it}=P(),lt={data(){return{activeFilterCountry:"",isFollowActive:{},bannerInputPlaceholder:"請輸入表演者名稱",aristData:{artists:[],searchWord:"",pagination:{},param:""},countries:[{id:1,location:"全部"},{id:2,location:"日本"},{id:3,location:"韓國"},{id:4,location:"歐美"},{id:5,location:"其它"}]}},computed:{...D(x,["AccessToken"])},methods:{...v(J,["postFollowConcetsData","deleteFollowConcetsData"]),async toggleFollowArtists(l,t){if(!this.AccessToken){it.fire({title:"登入後才能用追蹤功能喔！",showCancelButton:!0,confirmButtonText:"前往登入"}).then(c=>{c.isConfirmed&&(window.location.href="login#/login")});return}l?this.deleteFollowConcetsData(t).then(()=>this.getArtistsData()):this.postFollowConcetsData(t).then(()=>this.getArtistsData())},async getArtistsData(l=1){try{const t=await C(l);this.aristData.artists=t.data.data,this.aristData.pagination=t.data.pagination}catch(t){console.log(t)}finally{}},FilterByCountry(l="全部"){this.activeFilterCountry=l,l==="全部"?this.aristData.param="":this.aristData.param=l,b(),this.searchArtists(this.aristData.searchWord),setTimeout(()=>{b()},500)},searchArtists:A(async function(l,t=1){this.aristData.searchWord=l;try{const c=await F(this.aristData.searchWord,this.aristData.param,t);this.aristData.artists=c.data.data,console.log(this.aristData.artists)}catch(c){console.log(c)}},300)},mounted(){this.getArtistsData(),this.FilterByCountry()}},ht=Object.assign(lt,{__name:"ArtistsView",setup(l){return(t,c)=>{const y=I("RouterLink");return i(),r("section",O,[e("div",U,[o(V,{"prop-placeholder":t.bannerInputPlaceholder,onSearchMethod:t.searchArtists},{mainTitle:n(()=>[p("ARTISTS")]),_:1},8,["prop-placeholder","onSearchMethod"])]),e("div",Z,[e("div",G,[(i(!0),r(_,null,f(t.countries,a=>(i(),r("button",{class:w(["basic",[t.activeFilterCountry===a.location?"pink-fill":"pink-outline"]]),onClick:h=>t.FilterByCountry(a.location),key:a.id},d(a.location),11,H))),128))])]),e("div",null,[e("ul",K,[(i(!0),r(_,null,f(t.aristData.artists,a=>(i(),r("li",{key:a.id,class:"flex flex-row justify-between items-center p-2.5 md:border-[1px] border-black-60 rounded-2xl"},[o(y,{to:`/artists/${a.id}`,class:"w-[81%] flex items-center"},{default:n(()=>[e("img",{class:"size-[70px] object-cover rounded-full",src:a.cover_urls.square,alt:a.name},null,8,Q),e("div",X,[e("div",Y,[e("p",tt,d(a.name),1),e("p",at,d(a.follower_count)+" fans",1)]),e("p",st,d(a.concert_count)+" concerts",1)])]),_:2},1032,["to"]),o(s(N),null,{default:n(()=>[o(s(W),null,{default:n(()=>[(i(),r("button",{key:a.id,class:w(["basic-follow text-base",a.is_followed?"tiffany-follow":"tiffany-outline"]),onClick:h=>t.toggleFollowArtists(a.is_followed,a.id)},d(a.is_followed?"Following":"Follow"),11,et))]),_:2},1024),t.AccessToken===void 0?(i(),m(s(L),{key:0},{default:n(()=>[p(" 請登入開啟追蹤功能 ")]),_:1})):$("",!0)]),_:2},1024)]))),128))])]),o(s(j),{total:t.aristData.pagination.total_pages,"sibling-count":1,"show-edges":"","default-page":1,class:"flex justify-center my-5 lg:my-12"},{default:n(({page:a})=>[o(s(B),{class:"flex items-center gap-1"},{default:n(({items:h})=>[o(s(z)),o(s(R)),(i(!0),r(_,null,f(h,(u,g)=>(i(),r(_,null,[u.type==="page"?(i(),m(s(T),{key:g,value:u.value,"as-child":""},{default:n(()=>[o(s(S),{class:"w-10 h-10 p-0",variant:u.value===a?"default":"outline"},{default:n(()=>[p(d(u.value),1)]),_:2},1032,["variant"])]),_:2},1032,["value"])):(i(),m(s(q),{key:u.type,index:g},null,8,["index"]))],64))),256)),o(s(E)),o(s(M))]),_:2},1024)]),_:1},8,["total"]),ot])}}});export{ht as default};
