import{K as T,y as A,z as w,c as d,b as t,w as a,a as u,C as g,u as e,F as p,r as v,ae as B,o as n,E as r,B as f,g as m,t as _,h as C,ao as z,ag as R,ah as j,ai as x,aj as N,ak as V,al as q,am as M,an as Y,aA as D,ap as E,aq as L,ar as U,d as $}from"./index-hYb8mV10.js";import{a as O,b as P,_ as J}from"./CardTitle-jr1zxuQq.js";import{_ as K}from"./CardDescription--bcXpsLc.js";import{_ as Z}from"./CardFooter-uWct4G0s.js";import{_ as G,a as H,b as Q,c as W,d as X}from"./PaginationPrev-KE-igclW.js";import{_ as ee}from"./BannerComponent-0qRyy0gK.js";import{_ as te}from"./index-AVT-iNpO.js";import{u as F}from"./concerts-VWuGwE0A.js";import{h as S}from"./moment-WSJ9un1t.js";import"./more-horizontal-_fM9aBfc.js";const se={class:"container relative pb-[128px] lg:pb-[192px]"},ae={class:"space-y-6 lg:space-y-14 pb-5 lg:pb-12 border-b-2 border-black-40"},le={class:"space-y-4 space-x-4 space-x-reverse -m-1 p-1"},ne={class:"space-y-4 space-x-4 space-x-reverse -m-1 p-1"},oe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6"},ie=["src","alt"],re={class:"text-tiny text-black-60"},ce={class:"absolute pt-1 md:pt-2 pb-4 text-black-60 text-tiny"},ue=["onClick"],de={key:0},me=u("span",{class:"text-sm"},"查看更多",-1),{toast:fe}=T(),_e={data(){return{bannerInputPlaceholder:"輸入演唱會名稱",timeRanges:["本日","本週","本月"],countryRanges:["台灣","日本","韓國","歐美","其它"],timeButtonIsActive:"stateAll",countryButtonIsActive:"stateAll"}},inject:["http","path"],methods:{...A(F,["getAllConcerts","getFilterConcerts","callSaveAction","searchConcerts"]),...A(B,["getUserSavedAndFollowed"]),showToast(y){fe({title:y})}},computed:{...w(F,["concerts","pagination","toastActive","pagination"]),...w(B,["AccessToken","savedConcerts"]),isSaved(){return[...this.savedConcerts]}},mounted(){this.getAllConcerts(),this.AccessToken!==void 0&&this.getUserSavedAndFollowed()}},Be=Object.assign(_e,{__name:"ConcertsView",setup(y){return(s,i)=>{const k=$("router-link"),b=$("font-awesome-icon"),I=$("RouterLink");return n(),d("section",se,[t(ee,{"prop-placeholder":s.bannerInputPlaceholder,onSearchMethod:s.searchConcerts},{mainTitle:a(()=>[r("CONCERTS")]),_:1},8,["prop-placeholder","onSearchMethod"]),u("main",ae,[u("div",null,[u("div",le,[t(e(f),{variant:"tiffany-outline",size:"base",class:g(["me-4",{active:s.timeButtonIsActive==="stateAll"}]),onClick:i[0]||(i[0]=l=>{s.getFilterConcerts("time","all"),s.timeButtonIsActive="stateAll"})},{default:a(()=>[r(" 全部 ")]),_:1},8,["class"]),(n(!0),d(p,null,v(s.timeRanges,(l,c)=>(n(),m(e(f),{key:l,variant:"tiffany-outline",size:"base",class:g({active:s.timeButtonIsActive===`state${c}`}),onClick:o=>{s.getFilterConcerts("time",l),s.timeButtonIsActive=`state${c}`}},{default:a(()=>[r(_(l),1)]),_:2},1032,["class","onClick"]))),128))]),u("div",ne,[t(e(f),{variant:"pink-outline",size:"base",class:g(["me-4",{active:s.countryButtonIsActive==="stateAll"}]),onClick:i[1]||(i[1]=l=>{s.getFilterConcerts("country","all"),s.countryButtonIsActive="stateAll"})},{default:a(()=>[r(" 全部 ")]),_:1},8,["class"]),(n(!0),d(p,null,v(s.countryRanges,(l,c)=>(n(),m(e(f),{key:l,variant:"pink-outline",size:"base",class:g({active:s.countryButtonIsActive===`state${c}`}),onClick:o=>{s.getFilterConcerts("country",l),s.countryButtonIsActive=`state${c}`}},{default:a(()=>[r(_(l),1)]),_:2},1032,["class","onClick"]))),128))])]),u("ul",oe,[(n(!0),d(p,null,v(s.concerts,l=>(n(),d("li",{key:l.id},[t(e(J),{class:"border-black-80"},{default:a(()=>[t(e(O),{class:"rounded-t-2xl space-y-0 p-0"},{default:a(()=>[t(k,{to:`/concerts/${l.id}`},{default:a(()=>[u("img",{src:l.cover_urls.square,alt:l.title,class:"brightness-90 aspect-square rounded-2xl object-cover min-w-full"},null,8,ie)]),_:2},1032,["to"]),t(e(K),{class:"h-[8rem] sm:h-[10rem] md:h-[13rem] lg:h-[12rem] border-x-2 pt-6 px-6 border-black-80 flex justify-between align-top"},{default:a(()=>{var c;return[u("div",null,[u("p",re,[r(_(l.holding_time.substring(0,10))+" ",1),e(S).duration(e(S)(l.holding_time,"YYYY-MM-DD hh:mm:ss").diff()).minutes()<=0?(n(),m(e(te),{key:0,class:"ml-1 bg-black-85 hover:bg-black-85"},{default:a(()=>[r("已結束")]),_:1})):C("",!0)]),t(k,{to:`/concerts/${l.id}`},{default:a(()=>[t(e(P),{class:"text-base lg:text-lg text-white"},{default:a(()=>[r(_(l.title),1)]),_:2},1024)]),_:2},1032,["to"]),u("p",ce,_((c=l.venue)==null?void 0:c.title),1)]),s.AccessToken!==void 0?(n(),d("button",{key:0,onClick:o=>s.callSaveAction(l.id),class:"flex ml-auto"},[s.isSaved.some(o=>o.id===l.id)?(n(),m(b,{key:0,icon:"fa-solid fa-bookmark",class:"text-3xl ml-4 text-[var(--pink)] hover:translate-y-[-.25rem]"})):(n(),m(b,{key:1,icon:"fa-regular fa-bookmark",class:"text-3xl ml-4 text-[var(--pink)] hover:translate-y-[-.25rem]"}))],8,ue)):C("",!0),t(e(z),null,{default:a(()=>[t(e(R),{class:"flex"},{default:a(()=>[s.AccessToken===void 0?(n(),d("button",de,[t(b,{icon:"fa-regular fa-bookmark",class:"text-3xl ml-4 text-[var(--pink)] hover:translate-y-[-.25rem]"})])):C("",!0)]),_:1}),t(e(j),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(N),null,{default:a(()=>[r("登入才能收藏 ᓫ(°⌑°)ǃ")]),_:1}),t(e(V))]),_:1}),t(e(q),null,{default:a(()=>[t(e(M),null,{default:a(()=>[r("取消")]),_:1}),t(e(Y),{asChild:""},{default:a(()=>[t(k,{to:"/login"},{default:a(()=>[r(" 前往登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]}),_:2},1024)]),_:2},1024),t(e(Z),{class:"text-end border-x-2 border-b-2 border-black-80 rounded-b-2xl"},{default:a(()=>[t(I,{to:`/concerts/${l.id}`},{default:a(()=>[t(e(f),{variant:"white-outline",size:"base2",class:"border-black-80 hover:border-white"},{default:a(()=>[me,t(e(D),{class:"size-6 ms-2 lg:ms-4"})]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]))),128))]),t(e(U),{total:s.pagination.total_pages*10,"sibling-count":1,"show-edges":"","default-page":1},{default:a(({page:l})=>[t(e(E),{class:"flex items-center justify-center gap-1 pt-16"},{default:a(({items:c})=>[t(e(G),{onClick:i[2]||(i[2]=o=>s.getFilterConcerts("","",1))}),t(e(H),{onClick:i[3]||(i[3]=o=>s.getFilterConcerts("","",s.pagination.current_page-1))}),(n(!0),d(p,null,v(c,(o,h)=>(n(),d(p,null,[o.type==="page"?(n(),m(e(L),{key:h,value:o.value,"as-child":""},{default:a(()=>[t(e(f),{class:"w-10 h-10 p-0",variant:o.value===l?"default":"outline",onClick:pe=>s.getFilterConcerts("","",h+1)},{default:a(()=>[r(_(o.value),1)]),_:2},1032,["variant","onClick"])]),_:2},1032,["value"])):(n(),m(e(Q),{key:o.type,index:h},null,8,["index"]))],64))),256)),t(e(W),{onClick:i[4]||(i[4]=o=>s.getFilterConcerts("","",s.pagination.current_page+1))}),t(e(X),{onClick:i[5]||(i[5]=o=>s.getFilterConcerts("","",s.pagination.total_pages))})]),_:2},1024)]),_:1},8,["total"])])])}}});export{Be as default};
