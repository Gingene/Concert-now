import{K as C,ab as x,z as A,y as F,ac as $,ad as S,c as r,a as i,b as s,w as o,F as f,r as m,u as e,ae as T,af as B,o as n,E as u,C as g,t as c,ag as j,h as b,ah as I,ai as M,aj as V,ak as L,al as N,am as W,an as q,ao as z,ap as R,g as w,B as E,aq as P,ar as J,d as y}from"./index-YQxMthNK.js";import{_ as K}from"./BannerComponent-otXpaKNX.js";import{_ as O,a as U,b as Z,c as G,d as H}from"./PaginationPrev-m3oybA42.js";import{u as Q}from"./artists-Mu0_Owvk.js";import"./more-horizontal-B0LHj9Iw.js";const X={class:"container relative pb-[128px] lg:pb-[192px]"},Y={class:"grid grid-flow-col"},tt={class:"mb-4 lg:mb-14 mt-4"},at={class:"w-full flex flex-wrap gap-4"},st=["onClick"],et={class:"w-[100%] mx-auto grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"},ot=["src","alt"],lt={class:"ml-4"},it={class:"text-base lg:text-lg"},nt={class:"flex gap-3"},rt={class:"text-tiny text-black-40"},ct={class:"text-tiny text-black-60"},dt={key:0,class:"hover:translate-y-[-.25rem] basic-follow text-sm tiffany-outline"},ut=["onClick"],_t=i("hr",{class:"border-b-2 border-black-40"},null,-1),{toast:ft}=C(),{setIsLoading:k}=x(),ht={data(){return{activeFilterCountry:"",isFollowActive:{},bannerInputPlaceholder:"輸入表演者名稱",aristData:{artists:[],searchWord:"",pagination:{},param:""},countries:[{id:1,location:"全部"},{id:2,location:"台灣"},{id:3,location:"日本"},{id:4,location:"韓國"},{id:5,location:"歐美"},{id:6,location:"其它"}]}},computed:{...A(T,["AccessToken"])},methods:{...F(Q,["postFollowConcetsData","deleteFollowConcetsData"]),async toggleFollowArtists(l,t){l?(this.deleteFollowConcetsData(t).then(()=>this.getArtistsData()),this.toastMsg("刪除追蹤成功")):(this.postFollowConcetsData(t).then(()=>this.getArtistsData()),this.toastMsg("追蹤成功"))},async getArtistsData(l=1){try{const t=await $(l);this.aristData.artists=t.data.data,this.aristData.pagination=t.data.pagination}catch(t){console.error(t)}},FilterByCountry(l="全部"){this.activeFilterCountry=l,l==="全部"?this.aristData.param="":this.aristData.param=l,k(),this.searchArtists(this.aristData.searchWord),setTimeout(()=>{k()},500)},searchArtists:S(async function(l,t=1){this.aristData.searchWord=l;try{const _=await B(this.aristData.searchWord,this.aristData.param,t);this.aristData.artists=_.data.data}catch(_){console.error(_)}},300),toastMsg(l){ft({title:l,description:""})}},mounted(){this.getArtistsData(),this.FilterByCountry()}},yt=Object.assign(ht,{__name:"ArtistsView",setup(l){return(t,_)=>{const v=y("RouterLink"),D=y("router-link");return n(),r("section",X,[i("div",Y,[s(K,{"prop-placeholder":t.bannerInputPlaceholder,onSearchMethod:t.searchArtists},{mainTitle:o(()=>[u("ARTISTS")]),_:1},8,["prop-placeholder","onSearchMethod"])]),i("div",tt,[i("div",at,[(n(!0),r(f,null,m(t.countries,a=>(n(),r("button",{class:g(["basic",[t.activeFilterCountry===a.location?"pink-fill":"pink-outline"]]),onClick:h=>t.FilterByCountry(a.location),key:a.id},c(a.location),11,st))),128))])]),i("div",null,[i("ul",et,[(n(!0),r(f,null,m(t.aristData.artists,a=>(n(),r("li",{key:a.id,class:"flex flex-row justify-between items-center px-4 py-3 md:border-2 border-black-80 rounded-2xl"},[s(v,{to:`/artists/${a.id}`,class:"w-[81%] flex items-center"},{default:o(()=>[i("img",{class:"size-[70px] object-cover rounded-full",src:a.cover_urls.square,alt:a.name},null,8,ot),i("div",lt,[i("p",it,c(a.name),1),i("div",nt,[i("p",rt,c(a.follower_count)+" fans",1),i("p",ct,c(a.concert_count)+" concerts",1)])])]),_:2},1032,["to"]),s(e(z),null,{default:o(()=>[s(e(j),{class:"flex"},{default:o(()=>[t.AccessToken===void 0?(n(),r("button",dt,"Follow")):b("",!0)]),_:1}),s(e(I),null,{default:o(()=>[s(e(M),null,{default:o(()=>[s(e(V),null,{default:o(()=>[u("登入才能追蹤！")]),_:1}),s(e(L))]),_:1}),s(e(N),null,{default:o(()=>[s(e(W),null,{default:o(()=>[u("取消")]),_:1}),s(e(q),{asChild:""},{default:o(()=>[s(D,{to:"/login"},{default:o(()=>[u(" 前往登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t.AccessToken!==void 0?(n(),r("button",{key:a.id,class:g(["hover:translate-y-[-.25rem] basic-follow text-sm",a.is_followed?"tiffany-follow":"tiffany-outline"]),onClick:h=>t.toggleFollowArtists(a.is_followed,a.id)},c(a.is_followed?"Following":"Follow"),11,ut)):b("",!0)]))),128))])]),s(e(J),{total:t.aristData.pagination.total_pages,"sibling-count":1,"show-edges":"","default-page":1,class:"flex justify-center my-5 lg:my-12 pt-16"},{default:o(({page:a})=>[s(e(R),{class:"flex items-center gap-1"},{default:o(({items:h})=>[s(e(O)),s(e(U)),(n(!0),r(f,null,m(h,(d,p)=>(n(),r(f,null,[d.type==="page"?(n(),w(e(P),{key:p,value:d.value,"as-child":""},{default:o(()=>[s(e(E),{class:"w-10 h-10 p-0",variant:d.value===a?"default":"outline"},{default:o(()=>[u(c(d.value),1)]),_:2},1032,["variant"])]),_:2},1032,["value"])):(n(),w(e(Z),{key:d.type,index:p},null,8,["index"]))],64))),256)),s(e(G)),s(e(H))]),_:2},1024)]),_:1},8,["total"]),_t])}}});export{yt as default};
