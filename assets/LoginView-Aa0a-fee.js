import{t as p,o as u,s,u as l,_ as d}from"./vee-validate-zod.esm-vsbWcwS9.js";import{K as h,L as _,e as f,y as g,M as S,N as k,o as y}from"./index-WpFvv7PG.js";import"./CardTitle-Y70FJyeo.js";import"./CardDescription-JZGu8oCg.js";import"./CardContent-YxbMGZMr.js";import"./Label-5e8IPabx.js";import"./PopoverContent-0fY1Jast.js";const B={__name:"LoginView",setup(T){const{toast:o}=h(),r=_(),n=p(u({email:s({required_error:"必填"}),password:s({required_error:"必填"})})),a=l({validationSchema:n}),c=t=>{S.post(k.login,t).then(e=>{const{data:m}=e.data;document.cookie=`AccessToken=${m.access_token}; path=/`,localStorage.setItem("user",JSON.stringify(e.data.data.user)),o({title:"登入成功"}),r.push("/member")}).catch(()=>{o({title:"登入失敗，請再次確認資料是否正確。"})})},i=a.handleSubmit(t=>{c(t),a.resetForm()});return(t,e)=>(y(),f(d,{defaultPage:"login",onMethod:g(i),class:"overflow-hidden"},null,8,["onMethod"]))}};export{B as default};
