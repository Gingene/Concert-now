import{K as C,ab as D,z as A,y as $,ac as x,ad as B,c as d,a as n,b as s,w as i,F as f,r as g,u as e,ae as P,af as T,o as c,E as _,C as b,t as u,ag as S,h as k,ah as j,ai as I,aj as V,ak as W,al as L,am as M,an as N,ao as q,ap as z,g as w,B as R,aq as E,ar as J,d as v}from"./index-WU9oAnbs.js";import{_ as K}from"./BannerComponent-bS-ZaGEm.js";import{_ as O,a as U,b as Z,c as G,d as H}from"./PaginationPrev-ETJwK-sZ.js";import{u as Q}from"./artists-ugJUr-Se.js";import"./more-horizontal-Lgz2fTTo.js";const X={class:"container relative pb-[128px] lg:pb-[192px]"},Y={class:"grid grid-flow-col"},tt={class:"mb-4 lg:mb-14 mt-4"},at={class:"w-full flex flex-wrap gap-4"},st=["onClick"],et={class:"w-[100%] mx-auto grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"},ot=["src","alt"],lt={class:"ml-4"},it={class:"text-base lg:text-lg"},nt={class:"flex gap-3"},rt={class:"text-tiny text-black-40"},ct={class:"text-tiny text-black-60 hidden xs:block"},dt={class:"text-tiny text-black-60 block xs:hidden"},ut={key:0,class:"hover:translate-y-[-.25rem] basic-follow text-sm tiffany-outline"},_t=["onClick"],ft=n("hr",{class:"border-b-2 border-black-40"},null,-1),{toast:ht}=C(),{setIsLoading:h}=D(),pt={data(){return{activeFilterCountry:"",isFollowActive:{},bannerInputPlaceholder:"輸入表演者名稱",searchPage:1,aristData:{artists:[],searchWord:"",pagination:{},param:""},countries:[{id:1,location:"全部"},{id:2,location:"台灣"},{id:3,location:"日本"},{id:4,location:"韓國"},{id:5,location:"歐美"},{id:6,location:"其它"}]}},computed:{...A(P,["AccessToken"])},methods:{...$(Q,["postFollowConcetsData","deleteFollowConcetsData"]),async toggleFollowArtists(o,t){o?this.handleFollowAction(t,"刪除","刪除追蹤成功"):this.handleFollowAction(t,"新增","追蹤成功")},async getArtistsData(o=1){try{const t=await x(o);this.aristData.artists=t.data.data,this.aristData.pagination=t.data.pagination}catch(t){console.error(t)}},FilterByCountry(o="全部"){this.activeFilterCountry=o,o==="全部"?this.aristData.param="":this.aristData.param=o,h(),this.searchArtists(this.aristData.searchWord),setTimeout(()=>{h()},500)},FilterByPage(o){h(),this.searchArtists(this.aristData.searchWord,o),setTimeout(()=>{h()},500)},searchArtists:B(async function(o,t=1){this.aristData.searchWord=o,this.searchPage=t;try{const l=await T(this.aristData.searchWord,this.aristData.param,t);this.aristData.artists=l.data.data,this.aristData.pagination=l.data.pagination}catch(l){console.error(l)}},300),handleFollowAction(o,t,l){(t==="新增"?this.postFollowConcetsData:this.deleteFollowConcetsData)(o).then(()=>this.getArtistsData()).then(()=>{setTimeout(()=>this.toastMsg(l),300)})},toastMsg(o){ht({title:o,description:""})}},mounted(){this.getArtistsData(),this.FilterByCountry()}},vt=Object.assign(pt,{__name:"ArtistsView",setup(o){return(t,l)=>{const m=v("RouterLink"),F=v("router-link");return c(),d("section",X,[n("div",Y,[s(K,{"prop-placeholder":t.bannerInputPlaceholder,onSearchMethod:t.searchArtists},{mainTitle:i(()=>[_("ARTISTS")]),_:1},8,["prop-placeholder","onSearchMethod"])]),n("div",tt,[n("div",at,[(c(!0),d(f,null,g(t.countries,a=>(c(),d("button",{class:b(["basic",[t.activeFilterCountry===a.location?"pink-fill":"pink-outline"]]),onClick:p=>t.FilterByCountry(a.location),key:a.id},u(a.location),11,st))),128))])]),n("div",null,[n("ul",et,[(c(!0),d(f,null,g(t.aristData.artists,a=>(c(),d("li",{key:a.id,class:"flex flex-row justify-between items-center px-4 py-3 md:border-2 border-black-80 rounded-2xl"},[s(m,{to:`/artists/${a.id}`,class:"w-[81%] flex items-center"},{default:i(()=>[n("img",{class:"size-[70px] object-cover rounded-full",src:a.cover_urls.square,alt:a.name},null,8,ot),n("div",lt,[n("p",it,u(a.name),1),n("div",nt,[n("p",rt,u(a.follower_count)+" fans",1),n("p",ct,u(a.concert_count)+" concerts",1)]),n("p",dt,u(a.concert_count)+" concerts",1)])]),_:2},1032,["to"]),s(e(q),null,{default:i(()=>[s(e(S),{class:"flex"},{default:i(()=>[t.AccessToken===void 0?(c(),d("button",ut,"Follow")):k("",!0)]),_:1}),s(e(j),null,{default:i(()=>[s(e(I),null,{default:i(()=>[s(e(V),null,{default:i(()=>[_("請登入後追蹤")]),_:1}),s(e(W))]),_:1}),s(e(L),null,{default:i(()=>[s(e(M),null,{default:i(()=>[_("取消")]),_:1}),s(e(N),{asChild:""},{default:i(()=>[s(F,{to:"/login"},{default:i(()=>[_(" 前往登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t.AccessToken!==void 0?(c(),d("button",{key:a.id,class:b(["hover:translate-y-[-.25rem] basic-follow text-sm",a.is_followed?"tiffany-follow":"tiffany-outline"]),onClick:p=>t.toggleFollowArtists(a.is_followed,a.id)},u(a.is_followed?"Following":"Follow"),11,_t)):k("",!0)]))),128))])]),s(e(J),{page:t.searchPage,total:t.aristData.pagination.total_pages*10,"sibling-count":1,"show-edges":"","default-page":1,class:"flex justify-center my-5 lg:my-12 pt-16"},{default:i(({page:a})=>[s(e(z),{class:"flex items-center gap-1"},{default:i(({items:p})=>[s(e(O),{onClick:l[0]||(l[0]=r=>t.FilterByPage(1))}),s(e(U),{onClick:l[1]||(l[1]=r=>t.FilterByPage(t.aristData.pagination.current_page-1))}),(c(!0),d(f,null,g(p,(r,y)=>(c(),d(f,null,[r.type==="page"?(c(),w(e(E),{key:y,value:r.value,"as-child":""},{default:i(()=>[s(e(R),{class:"w-10 h-10 p-0",variant:r.value===a?"default":"outline",onClick:gt=>t.FilterByPage(r.value),disabled:r.value===a},{default:i(()=>[_(u(r.value),1)]),_:2},1032,["variant","onClick","disabled"])]),_:2},1032,["value"])):(c(),w(e(Z),{key:r.type,index:y},null,8,["index"]))],64))),256)),s(e(G),{onClick:l[2]||(l[2]=r=>t.FilterByPage(t.aristData.pagination.current_page+1))}),s(e(H),{onClick:l[3]||(l[3]=r=>t.FilterByPage(t.aristData.pagination.total_pages))})]),_:2},1024)]),_:1},8,["page","total"]),ft])}}});export{vt as default};
