import{K as ae,M as se,b4 as le,x as ie,y as ne,c as m,a as n,b as t,z as e,w as a,f as y,o as d,a4 as v,G as i,F as b,r as V,t as _,au as A,C as p,aT as T,av as q,aw as E,ax as I,R as re,S as oe,g as S,U as O,aJ as w,b5 as z,ay as M,az as j,aa as B,ab as L,ac as R,ad as P,ae as D,af as F,ag as G,ah as N,ai as K}from"./index-Z0lY0pmQ.js";import{_ as de}from"./Checkbox-D00Q53WW.js";import{_ as c}from"./Label-ZbWEp2UT.js";import{a as J,b as x,_ as ue,d as k,c as me,e as pe}from"./TableRow--f2G0a6o.js";import{_ as W,a as H,b as Q,c as X,d as Y,e as C,f as Z}from"./SelectLabel-8QEMeGKc.js";import{_ as ee}from"./DialogClose-cqj3KO-d.js";import{u as te}from"./venues-JQjsTdsv.js";import{g as $,j as ce,h as fe,e as f,E as g}from"./vee-validate.esm-YUx3g_vp.js";import{r as _e,s as ge,a as he,n as ye,u as be}from"./vee-validate-rules.esm-Z6Kmo-Wn.js";import{l as Ve}from"./vee-validate-i18n.esm-ZqaKjB89.js";import"./check-i1SmmkvQ.js";const ve={class:"flex gap-6 mb-8 relative"},xe={class:"w-[36%] lg:w-[290px] relative lg:pt-6"},ke=n("span",{class:"material-symbols-outlined absolute top-7 right-2.5 cursor-pointer hidden lg:block"}," search ",-1),$e={class:"w-[15%] lg:w-[200px] flex flex-col items-end lg:flex-row lg:justify-center lg:pt-5"},Se={class:"lg:pt-5 mt-auto"},we={class:"grid grid-cols-2 place-items-start gap-6"},ze={class:"grid grid-cols-1 gap-3"},Ce={class:"grid grid-cols-4 items-center gap-x-3"},Ue={class:"grid grid-cols-4 items-center gap-x-3"},Ae={class:"grid grid-cols-4 items-center gap-x-3"},Te={class:"grid grid-cols-4 items-center gap-x-3"},qe={class:"grid grid-cols-4 items-start gap-x-3"},Ee={class:"col-span-3 grid grid-cols-6 gap-3"},Ie={class:"col-span-2 flex justify-start px-1"},Oe=n("span",{class:"material-symbols-outlined hover:scale-110"},"add_circle",-1),Me=n("span",{class:"material-symbols-outlined hover:scale-110"},"edit",-1),je=["value"],Be={class:"rounded-full bg-secondary px-3 py-1 text-sm"},Le=n("span",{class:"material-symbols-outlined"},"do_not_disturb_on",-1),Re={class:"grid grid-cols-4 items-center gap-x-3"},Pe={class:"grid grid-cols-4 items-center gap-x-3"},De=n("span",{class:"-mt-3 text-tiny text-black-60"},"※ 請輸入 Google 地圖連結",-1),Fe={class:"grid grid-cols-1 gap-3"},Ge={class:"grid grid-cols-4 items-center gap-x-3"},Ne=["src"],Ke={key:1,class:"-mt-3 text-tiny text-black-60"},Je={class:"grid grid-cols-4 items-center gap-x-3"},We=["src"],He={key:3,class:"-mt-3 text-tiny text-black-60"},Qe={class:"grid grid-cols-4 items-center gap-x-3"},Xe=["src"],Ye={key:5,class:"-mt-3 text-tiny text-black-60"},Ze={class:"flex flex-col item-start gap-x-3"},et={class:"flex justify-start items-center py-2"},tt=n("p",{class:"text-sm border-b-2 border-primary p-2 me-4"},"交通方式",-1),at=n("span",{class:"material-symbols-outlined me-2"},"add_circle",-1),st=n("span",null,"新增欄位",-1),lt={key:0,class:"my-3"},it={class:"lg:pt-5 mt-auto"},nt={key:0,class:"text-primary tracking-wider text-lg"},rt=n("label",{for:"venueItem",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},null,-1),ot=n("span",{class:"material-symbols-outlined"},"edit",-1),dt=n("span",{class:"material-symbols-outlined"},"delete",-1),{toast:U}=ae();$("required",_e);$("size",ge);$("alphaDash",he);$("numeric",ye);$("url",be);ce({generateMessage:Ve("zh_TW",{messages:{required:"必填欄位",size:"圖片不能超過 3MB",alphaDash:"須為英數、破折號及底線的組合",numeric:"須為數字",url:"須為有效的連結",width:"圖片寬度必須大於 1800 像素"}}),validateOnInput:!0});const ut={data(){return{searchText:"",tempSeatArea:"",canEditSeats:!1,imageUrl:[],imageSize:[!1,!1,!1],sizeError:"圖片不能超過 3MB",isModalOpen:!1,deleteTitle:[],deleteArray:[],tempVenue:{seat_areas:[],transportation:[{type:"",info:""}]}}},methods:{handelModel(u){this.isModalOpen=u,u===!1&&this.resetAddVenue()},handelCheckList(u,s){const r=this.deleteArray.indexOf(u);r!==-1?(this.deleteArray.splice(r,1),this.deleteTitle.splice(s,1)):(this.deleteArray.push(u),this.deleteTitle.push(s))},readImg(u,s){if(u.target.files[0].size>3*1024**2){s==="horizontal"?(this.imageSize[0]=!0,document.getElementById("picture_horizontal").value=""):s==="square"?(this.imageSize[1]=!0,document.getElementById("square").value=""):s==="seat"&&(this.imageSize[2]=!0,document.getElementById("seat").value="");return}s==="horizontal"?(this.tempVenue.picture_horizontal=u.target.files[0],this.imageUrl[0]=URL.createObjectURL(this.tempVenue.picture_horizontal),this.imageSize[0]=!1):s==="square"?(this.tempVenue.picture_square=u.target.files[0],this.imageUrl[1]=URL.createObjectURL(this.tempVenue.picture_square),this.imageSize[1]=!1):s==="seat"&&(this.tempVenue.seat_picture=u.target.files[0],this.imageUrl[2]=URL.createObjectURL(this.tempVenue.seat_picture),this.imageSize[2]=!1)},resetAddVenue(){this.imageUrl=[],this.tempSeatArea="",this.canEditSeats=!1,this.imageSize=[!1,!1,!1],this.tempVenue={seat_areas:[],transportation:[{type:"",info:""}]}},addSeatArea(u){this.tempVenue.seat_areas.push(u),this.tempSeatArea=""},editSeatOptions(){this.canEditSeats?this.canEditSeats=!1:this.canEditSeats=!0},removeSeat(u){this.tempVenue.seat_areas.splice(u,1),this.tempVenue.seat_areas.length===0&&(this.canEditSeats=!1)},addInputGroup(){this.tempVenue.transportation.push({type:"",info:""})},onSubmit(u){if(this.imageUrl.length!==3){U({title:"請確認所有圖檔都上傳了"});return}const s={title:u.title,eng_title:u.eng_title,address:u.address,city:u.city,picture_horizontal:this.tempVenue.picture_horizontal,picture_square:this.tempVenue.picture_square,map_link:u.map_link,seat_picture:this.tempVenue.seat_picture,seat_areas:u.seat_areas,seat_amount:u.seat_amount,transportation:[]};this.tempVenue.transportation.forEach((r,l)=>{s.transportation[l]={type:r.type,info:r.info}}),se.post(le.venues,s).then(()=>{U({title:"新增成功"}),this.isModalOpen=!1,this.resetAddVenue(),this.getAdminVenues()}).catch(()=>{U({title:"新增失敗"})})},...ie(te,["getAdminVenues","searchAdminVenues","deleteVenue"])},computed:{...ne(te,["adminVenues","adminCity","adminSearchText","adminCityOptions"])},mounted(){this.getAdminVenues()}},kt=Object.assign(ut,{__name:"AdminVenuesView",setup(u){return(s,r)=>(d(),m("main",null,[n("nav",ve,[n("div",xe,[t(e(v),{type:"text",placeholder:"輸入場地名稱",modelValue:s.searchText,"onUpdate:modelValue":r[0]||(r[0]=l=>s.searchText=l),onKeyup:r[1]||(r[1]=l=>s.searchAdminVenues(s.searchText,s.adminCity))},null,8,["modelValue"]),ke]),n("div",$e,[t(e(Z),null,{default:a(()=>[t(e(W),null,{default:a(()=>[t(e(H),{placeholder:"地區"})]),_:1}),t(e(Q),null,{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(Y),{class:"tracking-wide"},{default:a(()=>[i("地區")]),_:1}),t(e(C),{value:"全部",onClick:r[2]||(r[2]=l=>s.searchAdminVenues(s.adminSearchText))},{default:a(()=>[i(" 全部 ")]),_:1}),(d(!0),m(b,null,V(s.adminCityOptions,l=>(d(),y(e(C),{key:l,value:l,onClick:o=>s.searchAdminVenues(s.adminSearchText,l)},{default:a(()=>[i(_(l),1)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),n("div",Se,[t(e(j),{open:s.isModalOpen,"onUpdate:open":s.handelModel},{default:a(()=>[t(e(A),{"as-child":""},{default:a(()=>[t(e(p),{variant:"outline",class:"bg-primary text-white hover:bg-[#6366f1] hover:text-white"},{default:a(()=>[i(" 新增場地 ")]),_:1})]),_:1}),t(e(T),{class:"sm:max-w-[850px]"},{default:a(()=>[t(e(q),null,{default:a(()=>[t(e(E),{class:"text-center"},{default:a(()=>[i("新增場地")]),_:1}),t(e(I))]),_:1}),t(e(fe),{onSubmit:s.onSubmit},{default:a(()=>[n("section",we,[n("section",ze,[n("div",Ce,[t(e(c),{for:"title",class:"text-left"},{default:a(()=>[i("中文名稱")]),_:1}),t(e(f),{name:"title",type:"text",rules:"required",class:"col-span-3 form-field"}),t(e(g),{name:"title",class:"errorText"})]),n("div",Ue,[t(e(c),{for:"eng_title",class:"text-left"},{default:a(()=>[i("英文名稱")]),_:1}),t(e(f),{name:"eng_title",type:"text",rules:"required|alphaDash",class:"col-span-3 form-field"}),t(e(g),{name:"eng_title",class:"errorText"})]),n("div",Ae,[t(e(c),{for:"address",class:"text-left"},{default:a(()=>[i("地址")]),_:1}),t(e(f),{name:"address",type:"text",rules:"required",class:"col-span-3 form-field"}),t(e(g),{name:"address",class:"errorText"})]),n("div",Te,[t(e(c),{for:"city",class:"text-left"},{default:a(()=>[i("地區")]),_:1}),t(e(f),{name:"city",rules:"required",class:"col-span-3"},{default:a(({field:l})=>[t(e(Z),re(oe(l)),{default:a(()=>[t(e(W),{class:"w-full col-span-3"},{default:a(()=>[t(e(H),{placeholder:"地區"})]),_:1}),t(e(Q),null,{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(Y),{class:"tracking-wide"},{default:a(()=>[i("地區")]),_:1}),(d(!0),m(b,null,V(s.adminCityOptions,o=>(d(),y(e(C),{key:o,value:o},{default:a(()=>[i(_(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:2},1040),t(e(g),{name:"city",class:"errorText"})]),_:1})]),n("div",qe,[t(e(c),{for:"seat_areas",class:"text-left py-2"},{default:a(()=>[i("座位區分類")]),_:1}),n("div",Ee,[t(e(v),{modelValue:s.tempSeatArea,"onUpdate:modelValue":r[3]||(r[3]=l=>s.tempSeatArea=l),disabled:s.canEditSeats,type:"text",class:"col-span-4"},null,8,["modelValue","disabled"]),n("div",Ie,[t(e(p),{type:"button",variant:"none",disabled:!s.tempSeatArea,class:"w-10 hover:text-[#6366f1]",onClick:r[4]||(r[4]=l=>s.addSeatArea(s.tempSeatArea))},{default:a(()=>[Oe]),_:1},8,["disabled"]),s.tempVenue.seat_areas.length!==0?(d(),y(e(p),{key:0,type:"button",variant:"none",class:"w-10 hover:text-[#6366f1]",onClick:s.editSeatOptions},{default:a(()=>[Me]),_:1},8,["onClick"])):S("",!0)]),t(e(g),{name:"seat_areas",class:"errorText",style:{padding:"0px"}}),t(e(f),{name:"seat_areas",rules:"required",modelValue:s.tempVenue.seat_areas,"onUpdate:modelValue":r[5]||(r[5]=l=>s.tempVenue.seat_areas=l)},{default:a(({field:l})=>[n("div",O(l,{value:s.tempVenue.seat_areas,class:"col-span-6 flex flex-wrap gap-x-1 gap-y-3"}),[(d(!0),m(b,null,V(s.tempVenue.seat_areas,(o,h)=>(d(),m("div",{key:h,class:"relative me-4"},[n("p",Be,_(o),1),s.canEditSeats?(d(),y(e(p),{key:0,type:"button",variant:"none",class:"w-10 h-10 absolute -top-3 -right-5 motion-safe:animate-bounce",onClick:mt=>s.removeSeat(h)},{default:a(()=>[Le]),_:2},1032,["onClick"])):S("",!0)]))),128))],16,je)]),_:1},8,["modelValue"])])]),n("div",Re,[t(e(c),{for:"seat_amount",class:"text-left"},{default:a(()=>[i("座位數量")]),_:1}),t(e(f),{name:"seat_amount",type:"text",rules:"required|numeric",class:"col-span-3 form-field"}),t(e(g),{name:"seat_amount",class:"errorText"})]),n("div",Pe,[t(e(c),{for:"map_link",class:"text-left"},{default:a(()=>[i("地圖連結")]),_:1}),t(e(f),{name:"map_link",type:"text",rules:"required|url",class:"col-span-3 form-field"}),t(e(g),{name:"map_link",class:"errorText"})]),De]),n("section",Fe,[n("div",Ge,[t(e(c),{for:"picture_horizontal",class:"text-left"},{default:a(()=>[i(" 圖片 - 橫圖 ")]),_:1}),t(e(f),{name:"picture_horizontal"},{default:a(()=>[t(e(v),{id:"picture_horizontal",type:"file",accept:"image/png, image/jpeg, image/webp",class:"col-span-3 hover:bg-accent",onChange:r[6]||(r[6]=l=>s.readImg(l,"horizontal"))}),w(n("span",{class:"errorText"},_(s.sizeError),513),[[z,s.imageSize[0]]])]),_:1})]),s.imageUrl[0]?(d(),m("img",{key:0,src:s.imageUrl[0],alt:"Preview Image",class:"max-w-[150px] max-h-[150px]"},null,8,Ne)):(d(),m("span",Ke,"※ 圖片不能超過 3MB、圖片寬度必須大於 1800 像素")),n("div",Je,[t(e(c),{for:"picture_square",class:"text-left"},{default:a(()=>[i(" 圖片 - 方圖 ")]),_:1}),t(e(f),{name:"picture_square"},{default:a(()=>[t(e(v),{id:"picture_square",type:"file",accept:"image/png, image/jpeg, image/webp",class:"col-span-3 hover:bg-accent",onChange:r[7]||(r[7]=l=>s.readImg(l,"square"))}),w(n("span",{class:"errorText"},_(s.sizeError),513),[[z,s.imageSize[1]]])]),_:1})]),s.imageUrl[1]?(d(),m("img",{key:2,src:s.imageUrl[1],alt:"Preview Image",class:"max-w-[150px] max-h-[150px]"},null,8,We)):(d(),m("span",He,"※ 圖片不能超過 3MB")),n("div",Qe,[t(e(c),{for:"seat_picture",class:"text-left"},{default:a(()=>[i(" 座位圖 ")]),_:1}),t(e(f),{name:"seat_picture"},{default:a(()=>[t(e(v),{id:"seat_picture",type:"file",accept:"image/png, image/jpeg, image/webp",class:"col-span-3 hover:bg-accent",onChange:r[8]||(r[8]=l=>s.readImg(l,"seat"))}),w(n("span",{class:"errorText"},_(s.sizeError),513),[[z,s.imageSize[2]]])]),_:1})]),s.imageUrl[2]?(d(),m("img",{key:4,src:s.imageUrl[2],alt:"Preview Image",class:"max-w-[150px] max-h-[150px]"},null,8,Xe)):(d(),m("span",Ye,"※ 圖片不能超過 3MB")),n("div",Ze,[n("div",et,[tt,t(e(p),{disabled:!s.tempVenue.transportation[s.tempVenue.transportation.length-1].type||!s.tempVenue.transportation[s.tempVenue.transportation.length-1].info,variant:"none",class:"text-sm rounded-[10px] hover:scale-105 hover:text-[#6366f1]",onClick:s.addInputGroup},{default:a(()=>[at,st]),_:1},8,["disabled","onClick"])]),(d(!0),m(b,null,V(s.tempVenue.transportation,(l,o)=>(d(),m("div",{key:o,class:"flex flex-col items-start gap-2 pt-3"},[t(e(c),{for:`transportation_type_${o}`,class:"text-left"},{default:a(()=>[i("類型")]),_:2},1032,["for"]),t(e(f),{type:"text",rules:"required",class:"form-field",modelValue:s.tempVenue.transportation[o].type,"onUpdate:modelValue":h=>s.tempVenue.transportation[o].type=h,name:`transportation_type_${o}`},null,8,["modelValue","onUpdate:modelValue","name"]),t(e(g),{name:`transportation_type_${o}`,class:"errorText",style:{"padding-left":"0px !important"}},null,8,["name"]),t(e(c),{for:`transportation_info_${o}`,class:"text-left"},{default:a(()=>[i("內容")]),_:2},1032,["for"]),t(e(f),{name:`transportation_info_${o}`,rules:"required",modelValue:s.tempVenue.transportation[o].info,"onUpdate:modelValue":h=>s.tempVenue.transportation[o].info=h},{default:a(({field:h})=>[n("textarea",O({type:"text",rows:"3",cols:"48",class:"border border-primary-foreground focus-visible:outline-black focus-visible:rounded-[10px] p-3 text-sm"},h),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"]),t(e(g),{name:`transportation_info_${o}`,class:"errorText",style:{"padding-left":"0px !important"}},null,8,["name"]),o+1!==s.tempVenue.transportation.length?(d(),m("span",lt,"/")):S("",!0)]))),128))])])]),t(e(M),null,{default:a(()=>[t(e(ee),null,{default:a(()=>[t(e(p),{variant:"outline",class:"px-6"},{default:a(()=>[i("取消")]),_:1})]),_:1}),t(e(p),{type:"submit"},{default:a(()=>[i("新增")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["open","onUpdate:open"])]),n("div",it,[t(e(K),null,{default:a(()=>[t(e(B),{"as-child":""},{default:a(()=>[t(e(p),{disabled:s.deleteArray.length===0,variant:"outline",class:"bg-primary text-white hover:bg-[#6366f1] hover:text-white"},{default:a(()=>[i(" 刪除多筆資料 ")]),_:1},8,["disabled"])]),_:1}),t(e(L),null,{default:a(()=>[t(e(R),null,{default:a(()=>[t(e(P),null,{default:a(()=>[i("確定要刪除以下場地?")]),_:1}),t(e(D))]),_:1}),(d(!0),m(b,null,V(s.deleteTitle,(l,o)=>(d(),m("div",{key:o,class:"text-black"},_(l),1))),128)),t(e(F),null,{default:a(()=>[t(e(G),{class:"bg-black-60"},{default:a(()=>[i("取消")]),_:1}),t(e(N),{class:"text-black-100 bg-tiffany",onClick:r[9]||(r[9]=l=>s.deleteVenue(s.deleteArray,"multiple"))},{default:a(()=>[i("確定")]),_:1})]),_:1})]),_:1})]),_:1})])]),s.adminVenues.length===0?(d(),m("p",nt,"oops! 搜尋不到相關資料 ╮(′～‵〞)╭")):(d(),y(e(pe),{key:1,class:"bg-white rounded-lg text-md mb-10"},{default:a(()=>[t(e(ue),null,{default:a(()=>[t(e(J),{class:"hover:bg-white text-nowrap",style:{color:"black !important"}},{default:a(()=>[t(e(x)),t(e(x),null,{default:a(()=>[i("名稱")]),_:1}),t(e(x),null,{default:a(()=>[i("地區")]),_:1}),t(e(x),null,{default:a(()=>[i("座位區分類")]),_:1}),t(e(x))]),_:1})]),_:1}),t(e(me),{class:"text-gray-600"},{default:a(()=>[(d(!0),m(b,null,V(s.adminVenues,l=>(d(),y(e(J),{key:l.id},{default:a(()=>[t(e(k),{class:"text-purple-primary"},{default:a(()=>[t(e(de),{id:"venueItem",onClick:o=>s.handelCheckList(l.id,l.title)},null,8,["onClick"]),rt]),_:2},1024),t(e(k),{class:"text-purple-primary"},{default:a(()=>[i(_(l.title),1)]),_:2},1024),t(e(k),null,{default:a(()=>[i(_(l.city),1)]),_:2},1024),t(e(k),null,{default:a(()=>{var o;return[i(_((o=l.seat_areas)==null?void 0:o.join("、")),1)]}),_:2},1024),t(e(k),{class:"text-right"},{default:a(()=>[t(e(j),null,{default:a(()=>[t(e(A),{"as-child":""},{default:a(()=>[t(e(p),{variant:"none",class:"hover:text-[#6366f1]"},{default:a(()=>[ot]),_:1})]),_:1}),t(e(T),{class:"sm:max-w-[850px]"},{default:a(()=>[t(e(q),null,{default:a(()=>[t(e(E),{class:"text-center"},{default:a(()=>[i("編輯場地")]),_:1}),t(e(I),null,{default:a(()=>[i("請編輯場地")]),_:1})]),_:1}),t(e(M),null,{default:a(()=>[t(e(ee),null,{default:a(()=>[t(e(p),{variant:"outline",class:"px-6"},{default:a(()=>[i("取消")]),_:1})]),_:1}),t(e(p),{type:"submit"},{default:a(()=>[i("儲存資料")]),_:1})]),_:1})]),_:1})]),_:1}),t(e(K),null,{default:a(()=>[t(e(B),{"as-child":""},{default:a(()=>[t(e(p),{variant:"none",class:"hover:text-[#6366f1]",disabled:l.id<=6},{default:a(()=>[dt]),_:2},1032,["disabled"])]),_:2},1024),t(e(L),null,{default:a(()=>[t(e(R),null,{default:a(()=>[t(e(P),null,{default:a(()=>[i("確定要刪除 "+_(l.title)+" ?",1)]),_:2},1024)]),_:2},1024),t(e(D),null,{default:a(()=>[i("一旦刪除後就無法恢復摟～")]),_:1}),t(e(F),null,{default:a(()=>[t(e(G),null,{default:a(()=>[i("取消")]),_:1}),t(e(N),{onClick:o=>s.deleteVenue(l.id,"single")},{default:a(()=>[i("確定")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]))}});export{kt as default};
