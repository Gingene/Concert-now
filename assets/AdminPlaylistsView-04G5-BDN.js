import{o as c,a as v,w as t,d as s,u as e,T as E,t as H,v as M,U as J,V as Q,j as W,W as X,O as F,X as K,_ as Z,c as m,B as $,F as y,e as u,C as _,l as ee,G as se,J as te,I as ae,S as le,m as ne,i as ie,f as n,Q as S,R as C,g as f,L as oe,N as ce,r as re,Y as ue}from"./index-f9igEiiO.js";import{_ as de,a as D,b as fe,c as _e}from"./TableCaption-zOqgX0sQ.js";import{_ as he}from"./Input-0TartXDi.js";import{_ as me,a as L,b as p,c as pe,e as ge,f as ve,g as ke,d as g,h as ye}from"./TableRow-y1O7-WEI.js";import{_ as x,a as B,b as R,c as q,d as V,f as k,e as j}from"./SelectLabel-zoLSkLU9.js";import{_ as I,a as A,b as T,c as N,d as U,e as O,f as be,g as P}from"./DialogFooter-MBc0aw6e.js";import"./createLucideIcon-jgbt0SAq.js";import"./x-H-Talg7V.js";const we={__name:"ScrollBar",props:{orientation:{type:String,required:!1,default:"vertical"},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const a=l;return(i,r)=>(c(),v(e(J),H(a,{class:e(M)("flex touch-none select-none transition-colors",l.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",l.orientation==="horizontal"&&"h-2.5 border-t border-t-transparent p-[1px]",i.$attrs.class??"")}),{default:t(()=>[s(e(E),{class:"relative flex-1 rounded-full bg-border"})]),_:1},16,["class"]))}},$e={__name:"ScrollArea",props:{type:{type:String,required:!1},dir:{type:String,required:!1},scrollHideDelay:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1,default:""}},setup(l){const a=l;return(i,r)=>(c(),v(e(K),{type:l.type,class:F(e(M)("relative overflow-hidden",a.class))},{default:t(()=>[s(e(Q),{class:"h-full w-full rounded-[inherit]"},{default:t(()=>[W(i.$slots,"default")]),_:3}),s(we),s(e(X))]),_:3},8,["type","class"]))}},Se={props:["mapSongs","concertTitle"]};function Ce(l,a,i,r,o,h){return c(!0),m(y,null,$(i.mapSongs[i.concertTitle],d=>(c(),m("h6",{key:d.id,class:"py-4"},[u("span",null,_(d.id)+". ",1),u("span",null,_(d.name),1)]))),128)}const Y=Z(Se,[["render",Ce]]),{setIsLoading:z}=ee(),De=()=>{let l;const a=se(null);return{state:l,err:a,httpData:async(r,o,h)=>(z(h),new Promise((d,b)=>{te[r](o).then(w=>{l=w.data,d(l)}).catch(w=>{console.log(w),a.value=w,b(a)}).finally(()=>{z()})}))}},{httpData:Le}=De(),G=ae("songsStore",{state:()=>({songs:[],mapSongs:{}}),actions:{getSongs(l){Le("get",l).then(a=>{for(const i of a.data)i.id=i.id.toString();this.songs=[...a.data],this.mapSongs=Object.groupBy([...a.data],({concert:i})=>i.title)})},checkReview(l){const a=this.songs.find(i=>i.id===l);a.is_reviewed=!0},checkAllReview(){for(const l of this.songs)l.is_reviewed=!0}}}),xe={class:"grid grid-cols-1 lg:grid-cols-5 gap-4 mb-8"},Be={class:"col-span-2 lg:col-span-1"},Re={class:"flex col-span-2"},qe=u("span",{class:"material-symbols-outlined absolute"}," search ",-1),Ve={class:"flex col-span-2 items-center justify-between"},je={key:0,class:"material-symbols-outlined"},Ie={key:1,class:"material-symbols-outlined"},Ae=["for"],Te=u("span",{class:"material-symbols-outlined"},"delete",-1),Ne={class:"flex justify-center py-12"},Ue=u("h2",null,"哇! 找不到資料~",-1),Oe=[Ue],Pe={class:"flex justify-center"},ze={components:{SongList:Y},data(){return{songCheckList:[],selectReview:"未審閱",initial:!0,backupDatas:[],userId1:{email:"1@gmail.com"}}},inject:["http","path"],methods:{chagneCheckList(l){const a=this.mockDatas.find(r=>r.id===l),i=this.songCheckList.findIndex(r=>r.id===a.id);i===-1?this.songCheckList.push(a):this.songCheckList.splice(i,1)},allCheckList(){this.songCheckList.length<this.mockDatas.length?this.songCheckList=this.mockDatas:this.songCheckList=[]},sortSongByDownVotes(){this.initial=!this.initial,this.initial?this.mockDatas.sort((l,a)=>l.down_votes-a.down_votes):this.mockDatas.sort((l,a)=>a.down_votes-l.down_votes)},matchSong(l){if(this.mockDatas=[...this.backupDatas],l.target.value==="")return;const a=this.mockDatas.filter(r=>r.name.match(l.target.value)),i=this.mockDatas.filter(r=>r.userId1.email.match(l.target.value));this.mockDatas=[...a,...i]},deleteSong(l){console.log(l),this.alertMessage("success","評論已刪除")},warnUser(l){console.log(l),this.alertMessage("success",`對${l.email}使用者警告已送出`)},alertMessage(l,a){le.fire({icon:l,text:a})},...ne(G,["getSongs","checkReview","checkAllReview"])},computed:{filterDatas(){return this.selectReview==="全部"?this.songs:this.selectReview==="未審閱"?this.songs.filter(l=>!l.is_reviewed):this.songs.filter(l=>l.is_reviewed)},...ie(G,["songs","mapSongs"])},mounted(){this.getSongs(this.path.songs),this.backupDatas=[...this.songs]}},Xe=Object.assign(ze,{__name:"AdminPlaylistsView",setup(l){return(a,i)=>{const r=re("router-link");return c(),m(y,null,[u("div",xe,[u("div",Be,[s(e(j),{modelValue:a.selectReview,"onUpdate:modelValue":i[0]||(i[0]=o=>a.selectReview=o)},{default:t(()=>[s(e(x),null,{default:t(()=>[s(e(B),{placeholder:"未審閱"})]),_:1}),s(e(R),null,{default:t(()=>[s(e(q),null,{default:t(()=>[s(e(V),null,{default:t(()=>[n("評論審閱")]),_:1}),s(e(k),{value:"未審閱"},{default:t(()=>[n(" 未審閱 ")]),_:1}),s(e(k),{value:"已審閱"},{default:t(()=>[n(" 已審閱 ")]),_:1}),s(e(k),{value:"全部"},{default:t(()=>[n(" 全部 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",Re,[s(e(he),{type:"text",placeholder:"輸入會場、用戶名稱查詢...",onInput:a.matchSong,class:"bg-white rounded-r-none border h-10 px-2 w-full focus-visible:ring-offset-0"},null,8,["onInput"]),s(e(f),{class:"rounded-l-none"},{default:t(()=>[qe]),_:1})]),u("div",Ve,[n(" 列表數量: "+_(a.filterDatas.length)+" ",1),u("div",null,[s(e(f),{class:"bg-lime-500",onClick:a.checkAllReview},{default:t(()=>[n("已審閱")]),_:1},8,["onClick"]),s(e(f),{class:"ml-4",variant:"destructive"},{default:t(()=>[n("刪除")]),_:1})])])]),u("div",null,_(a.songCheckList),1),S(s(e(ge),{class:"bg-white rounded-lg text-md mb-10"},{default:t(()=>[s(e(de),null,{default:t(()=>[n("歌單管理控制面板")]),_:1}),s(e(me),null,{default:t(()=>[s(e(L),{class:"hover:bg-white",style:{color:"black !important"}},{default:t(()=>[s(e(p),null,{default:t(()=>[s(e(D),{onClick:a.allCheckList},null,8,["onClick"])]),_:1}),s(e(p),null,{default:t(()=>[s(e(f),{variant:"ghost",onClick:a.sortSongByDownVotes},{default:t(()=>[n("倒推人數"),a.initial?(c(),m("span",je," stat_1 ")):(c(),m("span",Ie," stat_minus_1 "))]),_:1},8,["onClick"])]),_:1}),s(e(p),null,{default:t(()=>[n("歌曲")]),_:1}),s(e(p),null,{default:t(()=>[n("全部歌單")]),_:1}),s(e(p),null,{default:t(()=>[n("演唱會")]),_:1}),s(e(p),null,{default:t(()=>[n("用戶名")]),_:1}),s(e(p))]),_:1})]),_:1}),s(e(pe),{class:"text-gray-600"},{default:t(()=>[(c(!0),m(y,null,$(a.filterDatas,o=>(c(),v(e(L),{class:"py-8",key:o.id},{default:t(()=>[s(e(g),{class:"text-purple-primary"},{default:t(()=>[s(e(D),{id:o.id,onClick:h=>a.chagneCheckList(o.id),class:"checkboxList"},null,8,["id","onClick"]),u("label",{for:o.id,class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},null,8,Ae)]),_:2},1024),s(e(g),{class:"text-purple-primary text-center"},{default:t(()=>[n(_(o.down_votes),1)]),_:2},1024),s(e(g),null,{default:t(()=>[n(_(o.name),1)]),_:2},1024),s(e(g),null,{default:t(()=>[s(e(I),null,{default:t(()=>[s(e(A),null,{default:t(()=>[s(e(f),null,{default:t(()=>[n(" 檢視 ")]),_:1})]),_:1}),s(e(T),{class:"p-12"},{default:t(()=>[s(e($e),{class:"h-[300px] rounded-md border p-4"},{default:t(()=>[s(e(N),{class:"border-b-2 pb-4"},{default:t(()=>[s(e(U),null,{default:t(()=>[n(_(o.concert.title),1)]),_:2},1024),s(e(O),null,{default:t(()=>[n(" 歌單列表 ")]),_:1})]),_:2},1024),s(Y,{mapSongs:a.mapSongs,concertTitle:o.concert.title},null,8,["mapSongs","concertTitle"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),s(e(g),null,{default:t(()=>[s(r,{class:"text-purple-500 hover:text-purple-800",to:"/concert/4"},{default:t(()=>[n(_(o.concert.title),1)]),_:2},1024)]),_:2},1024),s(e(g),null,{default:t(()=>[n(_(a.userId1.email),1)]),_:1}),s(e(g),{class:"space-x-4 flex"},{default:t(()=>[o.is_reviewed?(c(),v(e(f),{key:1,class:"bg-lime-500"},{default:t(()=>[n("已審閱")]),_:1})):(c(),v(e(f),{key:0,class:"bg-gray-200",onClick:h=>a.checkReview(o.id)},{default:t(()=>[n("未審閱")]),_:2},1032,["onClick"])),s(e(I),null,{default:t(()=>[s(e(A),null,{default:t(()=>[s(e(f),{variant:"destructive"},{default:t(()=>[Te]),_:1})]),_:1}),s(e(T),null,{default:t(()=>[s(e(N),null,{default:t(()=>[s(e(U),{class:"text-center"},{default:t(()=>[n("是否要警告使用者？")]),_:1}),s(e(O),null,{default:t(()=>[s(e(j),null,{default:t(()=>[s(e(x),null,{default:t(()=>[s(e(B),{placeholder:"警告原因"})]),_:1}),s(e(R),null,{default:t(()=>[s(e(q),null,{default:t(()=>[s(e(V),null,{default:t(()=>[n("警告原因")]),_:1}),s(e(k),{value:"不實評論"},{default:t(()=>[n(" 不實評論 ")]),_:1}),s(e(k),{value:"惡意評論"},{default:t(()=>[n(" 惡意評論 ")]),_:1}),s(e(k),{value:"腥羶色內容"},{default:t(()=>[n(" 腥羶色內容 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(e(be),null,{default:t(()=>[s(e(P),null,{default:t(()=>[s(e(f),{class:"bg-lime-500",onClick:h=>a.deleteSong(o.id)},{default:t(()=>[n("不警告")]),_:2},1032,["onClick"])]),_:2},1024),s(e(P),null,{default:t(()=>[s(e(f),{variant:"destructive",onClick:h=>a.warnUser(o.userId1)},{default:t(()=>[n("送出警告")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},512),[[C,a.filterDatas.length!==0]]),S(u("div",Ne,Oe,512),[[C,!a.filterDatas.length]]),u("div",Pe,[s(e(ce),{total:100,"sibling-count":1,"show-edges":"","default-page":1},{default:t(({page:o})=>[s(e(oe),{class:"flex items-center md:gap-1"},{default:t(({items:h})=>[s(e(fe)),s(e(ve)),(c(!0),m(y,null,$(h,(d,b)=>(c(),m(y,null,[d.type==="page"?(c(),v(e(ue),{key:b,value:d.value,"as-child":""},{default:t(()=>[s(e(f),{class:"w-10 h-10 p-0",variant:d.value===o?"default":"page"},{default:t(()=>[n(_(d.value),1)]),_:2},1032,["variant"])]),_:2},1032,["value"])):(c(),v(e(ye),{key:d.type,index:b,class:"hidden sm:flex"},null,8,["index"]))],64))),256)),s(e(ke)),s(e(_e))]),_:2},1024)]),_:1})])],64)}}});export{Xe as default};
