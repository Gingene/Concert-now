import{i as D,aO as R,aP as E,aQ as F,u as s,o as r,c as d,a0 as H,C,T as S,N as O,g as b,w as l,O as k,P as G,Q,aR as J,s as B,a as t,S as U,aS as W,aT as K,aU as X,b as o,aV as Y,aW as Z,h as x,aX as ee,_ as te,ac as se,Z as ae,L as le,y as oe,z as ne,aY as ie,D as re,t as c,F as _,r as h,E as u,aD as ce,B as y,aE as de,aF as ue,aG as pe,aH as me,aI as fe,aJ as _e,aK as ge,G as he,A as be,I as ye,J as ve,d as xe}from"./index-iKGXzdRM.js";import{_ as $}from"./Label-V9EyO6_a.js";import{_ as q,a as A,b as I,c as T,d as z,e as w,f as j}from"./SelectLabel-Kru5ozw6.js";import{_ as ke,a as we,b as Ce}from"./HoverCardContent-i_Gq3uoY.js";import{T as L}from"./TitleComponent-JZcpmlgK.js";import{u as P}from"./venues-YDy9EHj4.js";import{M as Se}from"./more-horizontal-BI5Ng5To.js";import"./check-JbaUHzts.js";/**
 * @license lucide-vue-next v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=D("AlertCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),$e={__name:"Textarea",props:{class:{type:null,required:!1},defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const i=n,p=R(i,"modelValue",e,{passive:!0,defaultValue:i.defaultValue});return(a,f)=>E((r(),d("textarea",{"onUpdate:modelValue":f[0]||(f[0]=g=>H(p)?p.value=g:null),class:C(s(S)("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i.class))},null,2)),[[F,s(p)]])}},qe={__name:"Accordion",props:{type:{type:String,required:!0},modelValue:{type:[String,Array],required:!1},defaultValue:{type:[String,Array],required:!1},collapsible:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const p=O(n,e);return(a,f)=>(r(),b(s(J),G(Q(s(p))),{default:l(()=>[k(a.$slots,"default")]),_:3},16))}},Ae={__name:"AccordionContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(n){const e=n,i=B(()=>{const{class:m,...p}=e;return p});return(m,p)=>(r(),b(s(W),U(i.value,{class:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"}),{default:l(()=>[t("div",{class:C(s(S)("pb-4 pt-0",e.class))},[k(m.$slots,"default")],2)]),_:3},16))}},Ie={__name:"AccordionItem",props:{disabled:{type:Boolean,required:!1},value:{type:String,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(n){const e=n,i=B(()=>{const{class:p,...a}=e;return a}),m=K(i);return(p,a)=>(r(),b(s(X),U(s(m),{class:s(S)("border-b",e.class)}),{default:l(()=>[k(p.$slots,"default")]),_:3},16,["class"]))}},Te={__name:"AccordionTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},hideIcon:{type:Boolean,required:!1}},setup(n){const e=n,i=B(()=>{const{class:m,...p}=e;return p});return(m,p)=>(r(),b(s(ee),{class:"flex"},{default:l(()=>[o(s(Y),U(i.value,{class:s(S)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e.class)}),{default:l(()=>[k(m.$slots,"default"),n.hideIcon?x("",!0):k(m.$slots,"icon",{key:0},()=>[o(s(Z),{class:"h-4 w-4 shrink-0 transition-transform duration-200"})])]),_:3},16,["class"])]),_:3}))}},V=n=>(ye("data-v-2e0fb34c"),n=n(),ve(),n),ze={class:"container pb-20 lg:pb-32 pt-[400px] md:pt-[460px] lg:pt-[600px] 2xl:pt-[700px] space-y-6 lg:space-y-10"},je={class:"space-y-6 lg:space-y-10"},Pe={class:"text-center"},Be={class:"text-4xl lg:text-5xl font-black"},Ue={class:"py-4 lg:hidden text-center text-black-40"},Le={class:"collapse-left py-4"},Me={class:"col-start-2 py-4"},Ne={class:"collapse-right py-4"},De={class:"grid grid-cols-1 lg:grid-cols-5 gap-6"},Re={class:"lg:order-2 lg:col-span-2 py-10 sm:py-14 px-7 xs:px-9 sm:px-12 lg:px-14 rounded-[40px] bg-shadow-trans-text venue-section"},Ee=V(()=>t("p",{class:"text-gray-500 text-base sm:text-xl lg:pt-5 font-lato text-center"},"_____ STAGE _____",-1)),Fe={class:"h-[200px] sm:h-[300px] w-[80%] xl:w-[60%] text-sm sm:text-base grid grid-flow-row auto-row-max gap-2 md:gap-4 mx-auto my-3 lg:my-5"},He=["onClick"],Oe={class:"space-y-6 lg:space-y-10 box-shadow-light2 px-4 py-6 sm:p-10 rounded-btn2 lg:col-span-3"},Ge={class:"flex justify-between items-center"},Qe={class:"text-center"},Je=V(()=>t("p",{class:"text-sm text-black-60 pb-4"},"※ 座位區、演唱會與評論皆需填寫，若有缺漏會新增失敗。",-1)),We={class:"relative flex items-center"},Ke={class:"flex items-center"},Xe={class:"text-black-40"},Ye={class:"relative flex items-center mb-4"},Ze={key:0},et={key:1},tt={class:"space-y-4"},st=V(()=>t("span",{class:"text-sm text-black-60"},"圖片至多可傳三張",-1)),at={class:"flex justify-center space-x-4"},lt={key:0,id:"commentImage1",class:"size-[80px] lg:size-[150px]",src:"http://placehold.it/150",alt:"your image"},ot={key:1,id:"commentImage2",class:"size-[80px] lg:size-[150px]",src:"http://placehold.it/150",alt:"your image"},nt={key:2,id:"commentImage3",class:"size-[80px] lg:size-[150px]",src:"http://placehold.it/150",alt:"your image"},it={class:"flex justify-center items-center"},rt={class:"flex justify-center items-center space-x-2"},ct={class:"col-span-2 sm:col-span-1 lg:col-span-1"},dt=["src","alt"],ut={class:"col-span-8 sm:col-span-10 lg:col-span-10 xl:col-span-10 flex flex-col space-y-4"},pt={class:"space-x-3"},mt={class:"text-black-40"},ft={class:"text-sm md:text-base lg:flex lg:flex-wrap lg:justify-between"},_t={class:"mb-4 lg:mb-0"},gt={key:0,class:"flex space-x-3 w-full lg:w-auto"},ht=["src"],bt={class:"text-tiny text-black-60"},yt={class:"truncate"},vt={class:"col-span-2 sm:col-span-1 lg:col-span-1 lg:-ml-4 xl:ml-0"},xt=V(()=>t("span",null,"檢舉該名使用者",-1)),kt={class:"marquee-type bg-tiffany"},wt={ref:"marquee",class:"flex text-[5rem] md:text-[6.5rem] lg:text-[8rem] font-black text-black tracking-[-1px] whitespace-nowrap overflow-x-auto scrollbar-none mb-6 lg:mb-10 leading-[1]"},Ct={class:"marquee space-x-4"},St={class:"text-stroke-black font-display uppercase"},Vt={class:"text-stroke-black font-display uppercase"},$t={class:"marquee space-x-4"},qt={class:"text-stroke-black font-display uppercase"},At={class:"text-stroke-black font-display uppercase"},It={class:"container"},Tt={class:"mt-4 lg:mt-6"},zt={class:"mb-4 lg:mb-6"},jt=["src"],Pt={class:"space-y-6 lg:space-y-10"},Bt={class:"flex gap-4 font-black -mb-[18px] lg:-mb-[33px] pt-8 lg:pt-[42px]"},Ut={class:"text-lg sm:text-2xl lg:text-4xl"},Lt={class:"list-disc text-base px-6 space-y-4 lg:-mt-16 lg:w-3/4 hidden lg:block lg:opacity-0"},Mt={class:"list-disc text-base px-6 lg:px-0 space-y-4 mt-6 lg:mt-4 lg:w-2/3 lg:absolute lg:top-0"},{setIsLoading:M}=se(),{toast:v}=ae(),Nt={data(){return{commentSeatArea:"",concertId:"",commentContent:"",images:[],checkPolicy:!0,openCommentModal:!1,accordionItems:[]}},props:["id"],inject:["http","path"],methods:{hoverTitle(n){n.currentTarget.childNodes.forEach((e,i)=>{i!==1&&e.classList.remove("hidden","collapse-left","collapse-right"),i===0?e.classList.add("collapse-left","show"):i===2&&e.classList.add("collapse-right","show")})},removeHoverTitle(n){n.currentTarget.childNodes.forEach((e,i)=>{i!==1&&e.classList.remove("w-auto","collapse-left","collapse-right","show"),i===0?e.classList.add("collapse-left"):i===2&&e.classList.add("collapse-right")})},readURL(n){if(n.target.files&&n.target.files[0]){if(n.target.files.length>3){v({title:"圖片最多3張",description:""});return}for(let e=0;e<n.target.files.length;e++){const i=new FileReader;i.onload=function(m){document.querySelector("#commentImage"+(e+1)).setAttribute("src",m.target.result)},i.readAsDataURL(n.target.files[e])}this.images=[...n.target.files]}},handleFileButton(){document.querySelector("#commentPictures").click()},onSubmit(n){n.preventDefault(),this.postComment()},postComment(){if(this.concertId===""){v({title:"請選擇演唱會",description:""});return}if(this.commentSeatArea===""){v({title:"請選擇座位區",description:""});return}if(this.commentContent===""){v({title:"請輸入評論",description:""});return}if(!this.checkPolicy){v({title:"請先勾選同意評論規範",description:""});return}const n={concert_id:this.concertId,seat_area:this.commentSeatArea,comment:this.commentContent,images:this.images};this.images.length===0&&delete n.images,M(),le.post(`${this.path.venues}/${this.$route.params.id}/comment`,n).then(e=>{this.resetComment(),v({title:"已新增評論",description:""}),this.getVenue(this.$route.params.id),this.openCommentModal=!1}).catch(e=>{console.error(e)}).finally(()=>{M()})},resetComment(){this.concertId="",this.commentSeatArea="",this.commentContent="",this.images=[]},showCommentPolicy(){v({title:"評論規範",description:"(1)請勿留言不實評論 (2)請物留言惡意評論 (3)請勿留言腥羶色內容。請注意警告五次將被永久停權。"})},openModal(n){this.openCommentModal=n,n===!1&&this.resetComment()},handleMarQuee(){this.$refs.marquee.childNodes.forEach(e=>{e.textContent.length<=90&&e.textContent.length>60?e.style.animationDuration="80s":e.textContent.length<=120&&e.textContent.length>90&&(e.style.animationDuration="90s")})},activeArea(n){this.seatArea=n},...oe(P,["getVenue","reportUser"])},computed:{...ne(P,["venue","pagination","filterSeatComment","transportation"]),...ie(P,["seatArea"])},watch:{id(n){this.getVenue(n),this.seatArea=""},concertId(n){}},mounted(){this.getVenue(this.id)},updated(){document.querySelectorAll(".accordion-button").forEach(e=>{var i;((i=e==null?void 0:e.dataset)==null?void 0:i.state)==="open"&&(e==null||e.click())})}},Dt=Object.assign(Nt,{__name:"VenueSingleView",setup(n){return(e,i)=>{var p;const m=xe("font-awesome-icon");return r(),d(_,null,[t("div",{class:"w-full h-[400px] md:h-[460px] lg:h-[600px] 2xl:h-[700px] bg-no-repeat bg-cover absolute top-0 -z-10 bg-bottom shadow",style:re(`background-image: url(${(p=e.venue.picture)==null?void 0:p.horizontal})`)},null,4),t("section",ze,[t("main",je,[t("div",Pe,[t("h1",Be,c(e.venue.title),1),t("div",Ue,c(e.venue.address),1),t("div",{class:"hidden lg:grid grid-cols-3 text-lg text-center text-black-40",onMouseover:i[0]||(i[0]=(...a)=>e.hoverTitle&&e.hoverTitle(...a)),onMouseleave:i[1]||(i[1]=(...a)=>e.removeHoverTitle&&e.removeHoverTitle(...a))},[t("div",Le,c(e.venue.seat_amount)+" 席次",1),t("div",Me,c(e.venue.eng_title),1),t("div",Ne,c(e.venue.address),1)],32)]),o(L,{class:"flex justify-center"},{subTitle:l(()=>[u(" VENUES ")]),mainTitle:l(()=>[u(" 場地體驗 ")]),_:1}),t("div",De,[t("article",Re,[Ee,t("div",Fe,[(r(!0),d(_,null,h(e.venue.seat_areas,(a,f)=>(r(),d("div",{onClick:g=>e.activeArea(a),key:`${f+123}`,class:C(["text-[12px] md:text-base lg:text-lg gradient-border flex justify-center items-center transition-transform hover:-translate-x-1 hover:-translate-y-1",a===e.seatArea?"active":""])},[t("p",null,c(a),1)],10,He))),128))])]),t("div",Oe,[t("div",Ge,[o(s(j),{modelValue:e.seatArea,"onUpdate:modelValue":i[2]||(i[2]=a=>e.seatArea=a)},{default:l(()=>[o(s(q),{class:"w-1/3 border-0 text-primary bg-pink box-shadow-pink-blur box-shadow-pink-blur-hover focus-visible:outline-0 h-10 p-4 md:py-4 md:px-6 rounded-btn1"},{default:l(()=>[o(s(A),{placeholder:"座位區"})]),_:1}),o(s(I),null,{default:l(()=>[o(s(T),null,{default:l(()=>[o(s(z),null,{default:l(()=>[u("座位區")]),_:1}),o(s(w),{value:"all"},{default:l(()=>[u(" 全部座位區 ")]),_:1}),(r(!0),d(_,null,h(e.venue.seat_areas,a=>(r(),b(s(w),{value:a,key:a},{default:l(()=>[u(c(a),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",Qe,[o(s(ge),{open:e.openCommentModal,"onUpdate:open":e.openModal},{default:l(()=>[o(s(ce),{"as-child":""},{default:l(()=>[o(s(y),{variant:"white-outline",class:"rounded-full p-2"},{default:l(()=>[o(m,{icon:"fa-solid fa-plus",class:"text-xl size-6"})]),_:1})]),_:1}),o(s(de),{class:"max-w-sm md:max-w-3xl"},{default:l(()=>[o(s(ue),{class:"mb-6"},{default:l(()=>[o(s(pe),null,{default:l(()=>[u("留下評論")]),_:1}),o(s(me),null,{default:l(()=>[Je]),_:1})]),_:1}),t("form",{onSubmit:i[7]||(i[7]=(...a)=>e.onSubmit&&e.onSubmit(...a)),class:"space-y-6 lg:space-y-10",ref:"modalForm"},[t("div",We,[o(s($),{for:"seat-select",class:"absolute text-white bg-black-85 border-black-85 border rounded-md pl-6 pr-20 -z-10 py-2 px-3"},{default:l(()=>[u("座位區")]),_:1}),o(s(j),{modelValue:e.commentSeatArea,"onUpdate:modelValue":i[3]||(i[3]=a=>e.commentSeatArea=a),id:"seat-select"},{default:l(()=>[o(s(q),{class:"ml-[7rem] border-white w-[220px] md:w-full"},{default:l(()=>[o(s(A),{placeholder:"選取座位區"})]),_:1}),o(s(I),null,{default:l(()=>[o(s(T),null,{default:l(()=>[o(s(z),null,{default:l(()=>[u("選取座位區")]),_:1}),(r(!0),d(_,null,h(e.venue.seat_areas,a=>(r(),b(s(w),{value:a,key:a},{default:l(()=>[u(c(a),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",Ke,[o(s($),{for:"concert-select",class:"absolute text-white bg-black-85 border-black-85 border rounded-md pl-6 pr-20 -z-10 py-2 px-3"},{default:l(()=>[u("演唱會")]),_:1}),o(s(j),{id:"concert-select",modelValue:e.concertId,"onUpdate:modelValue":i[4]||(i[4]=a=>e.concertId=a)},{default:l(()=>[o(s(q),{class:"ml-[7rem] border-white w-[220px] md:w-full"},{default:l(()=>[o(s(A),{placeholder:"選取演唱會"})]),_:1}),o(s(I),null,{default:l(()=>[o(s(T),null,{default:l(()=>[o(s(z),null,{default:l(()=>[u("選取演唱會")]),_:1}),(r(!0),d(_,null,h(e.venue.concerts,a=>(r(),b(s(w),{value:a.id.toString(),key:a.id},{default:l(()=>[u(c(a.title)+" ",1),t("time",Xe,c(a.holding_time.split(" ")[0]),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",null,[t("div",Ye,[o(s($),{for:"commentPictures",class:"absolute text-white bg-black-85 border-black-85 border rounded-md pl-6 pr-20 -z-10 py-2 px-3"},{default:l(()=>[u("評論圖片")]),_:1}),t("input",{id:"commentPictures",multiple:"",class:"hidden",type:"file",accept:"image/png, image/jpeg",onChange:i[5]||(i[5]=(...a)=>e.readURL&&e.readURL(...a))},null,32),o(s(y),{type:"button",class:"ml-[7rem] border-white border w-[220px] md:w-full rounded-md justify-start text-sm px-3",onClick:e.handleFileButton},{default:l(()=>[e.images.length?(r(),d("span",et,"已選擇"+c(e.images.length)+"個檔案",1)):(r(),d("span",Ze,"未選擇任何檔案"))]),_:1},8,["onClick"])]),t("div",tt,[st,t("div",at,[e.images[0]?(r(),d("img",lt)):x("",!0),e.images[1]?(r(),d("img",ot)):x("",!0),e.images[2]?(r(),d("img",nt)):x("",!0)])])]),t("div",null,[o(s($e),{modelValue:e.commentContent,"onUpdate:modelValue":i[6]||(i[6]=a=>e.commentContent=a),placeholder:"留下你的評論..."},null,8,["modelValue"])]),o(s(fe),{class:"justify-center sm:justify-center flex-col sm:flex-col space-y-2"},{default:l(()=>[t("div",it,[o(s(y),{for:"commentPolicy",type:"button",class:"text-sm text-black-60 text-right cursor-pointer px-0",onClick:e.showCommentPolicy},{default:l(()=>[u("送出即代表您同意遵守評論規範")]),_:1},8,["onClick"])]),t("div",rt,[o(s(_e),{"as-child":""},{default:l(()=>[o(s(y),{type:"button",size:"base",class:"bg-black-80 hover:bg-black-80 px-14 md:px-14 lg:px-14"},{default:l(()=>[u("取消")]),_:1})]),_:1}),o(s(y),{variant:"tiffany-fill",size:"base",type:"submit",class:"px-14 md:px-14 lg:px-14"},{default:l(()=>[u("送出評論")]),_:1})])]),_:1})],544)]),_:1})]),_:1},8,["open","onUpdate:open"])])]),o(s(he),{class:"lg:h-[350px]"},{default:l(()=>[(r(!0),d(_,null,h(e.filterSeatComment,(a,f)=>(r(),d("div",{key:a.id,class:C(["grid grid-cols-12 gap-x-3 border-b border-black-60 py-4 min-h-[150px]",{"border-t":f===0}])},[t("div",ct,[t("img",{src:a.user.profile_image_url,alt:a.user.name,class:"rounded-full size-8 bg-white/25 object-cover"},null,8,dt)]),t("div",ut,[t("div",pt,[t("span",null,c(a.user.name),1),t("span",mt,c(a.seat_area),1)]),t("div",ft,[t("p",_t,c(a.comment),1),a.images.length?(r(),d("div",gt,[(r(!0),d(_,null,h(a.images,(g,N)=>(r(),d("img",{key:N,src:g,alt:"",class:"size-20 object-cover rounded-xl"},null,8,ht))),128))])):x("",!0)]),t("div",bt,[t("p",yt,c(a.concert.title),1),t("time",null,c(a.created_at),1)])]),t("div",vt,[o(s(ke),{openDelay:0},{default:l(()=>[o(s(we),{"as-child":""},{default:l(()=>[o(s(y),{variant:"ghost",class:"p-1"},{default:l(()=>[o(s(Se))]),_:1})]),_:1}),o(s(Ce),null,{default:l(()=>[o(s(y),{onClick:g=>e.reportUser(a.user.name),class:"justify-between w-full"},{default:l(()=>[xt,o(s(Ve))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])],2))),128))]),_:1})])])])]),t("div",null,[t("div",kt,[t("div",wt,[t("p",Ct,[t("span",null,c(e.venue.title),1),t("span",St,c(e.venue.eng_title),1),t("span",null,c(e.venue.title),1),t("span",Vt,c(e.venue.eng_title),1)]),t("p",$t,[t("span",null,c(e.venue.title),1),t("span",qt,c(e.venue.eng_title),1),t("span",null,c(e.venue.title),1),t("span",At,c(e.venue.eng_title),1)])],512)])]),t("section",It,[o(L,{class:"overflow-x-hidden"},{subTitle:l(()=>[u(" TRANSPORT ")]),mainTitle:l(()=>[u(" 交通方式 ")]),_:1}),t("div",Tt,[t("div",zt,[t("iframe",{src:e.venue.map_link,frameborder:"0",class:"w-full h-[375px] md:h-[600px] rounded-md"},null,8,jt)]),t("div",Pt,[o(s(qe),{type:"single",collapsible:""},{default:l(()=>[(r(!0),d(_,null,h(e.transportation,a=>(r(),b(s(Ie),{class:"lg:relative border-b-4",key:a.type,value:a.value},{default:l(()=>[o(s(Te),{hideIcon:!0,value:a.value,class:"accordion-button hover:no-underline"},{default:l(()=>[t("div",Bt,[o(s(be),{class:"size-10 lg:size-16 pb-2 sm:pb-0 lg:pb-2"}),t("span",Ut,c(a.type),1)])]),_:2},1032,["value"]),o(s(Ae),{class:"lg:flex lg:justify-end"},{default:l(()=>[t("ul",Lt,[(r(!0),d(_,null,h(a.info,(f,g)=>(r(),d("li",{key:g},c(f),1))),128))]),t("ul",Mt,[(r(!0),d(_,null,h(a.info,(f,g)=>(r(),d("li",{key:g},c(f),1))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])])])],64)}}}),Wt=te(Dt,[["__scopeId","data-v-2e0fb34c"]]);export{Wt as default};
