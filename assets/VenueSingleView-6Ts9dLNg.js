import{j as M,ax as N,ay as B,az as D,u as s,o as c,c as d,Y as P,a8 as v,S as R,_ as E,aA as F,aa as H,al as O,af as J,ag as K,aB as Q,a as t,I as W,t as r,b as l,w as a,F as p,E as u,r as _,h as x,ao as Y,D as g,ap as G,aq as X,ar as Z,as as ee,i as k,at as te,au as se,av as le,J as ae,A as oe,d as ne,K as ie,L as re}from"./index-bAjc-hai.js";import{_ as V}from"./Label-LtPBpBhd.js";import{_ as $,a as S,b as I,c as z,d as T,e as w,f as A}from"./SelectLabel-9iTD4sDP.js";import{a as ce,b as de,_ as ue,c as pe}from"./AccordionTrigger-XLzBpyZw.js";import{_ as me,a as fe,b as _e}from"./HoverCardContent-2oVJY8yW.js";import{T as q}from"./TitleComponent-Tx5uq7X5.js";import{u as j}from"./venues-4cFwr4bN.js";import{M as ge}from"./more-horizontal-bCTm9HMx.js";import"./check-plfbtypl.js";/**
 * @license lucide-vue-next v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=M("AlertCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),be={__name:"Textarea",props:{class:{type:null,required:!1},defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1}},emits:["update:modelValue"],setup(i,{emit:e}){const n=i,b=N(n,"modelValue",e,{passive:!0,defaultValue:n.defaultValue});return(o,m)=>B((c(),d("textarea",{"onUpdate:modelValue":m[0]||(m[0]=f=>P(b)?b.value=f:null),class:v(s(R)("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n.class))},null,2)),[[D,s(b)]])}},C=i=>(ie("data-v-98074b1b"),i=i(),re(),i),ve={class:"container pb-20 lg:pb-32 pt-[400px] md:pt-[600px] lg:pt-[850px] space-y-6 lg:space-y-10"},ye={class:"text-center"},xe={class:"text-2xl font-display lg:text-3xl 2xl:text-5xl font-black"},ke={class:"space-y-6 lg:space-y-10"},we={class:"py-6 lg:hidden text-center"},Ce={class:"collapse-left py-6"},Ve={class:"col-start-2 py-6"},$e={class:"collapse-right py-6"},Se={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ie={class:"lg:order-2 flex items-center"},ze=["src","alt"],Te={class:"space-y-6 lg:space-y-10 box-shadow-light2 p-6 lg:p-10 rounded-btn2 col-span-2"},Ae={class:"flex justify-between pb-6 lg:pb-10"},je={class:"text-center"},qe=C(()=>t("span",null,"留下評論",-1)),Le=C(()=>t("p",{class:"text-sm text-black-60 pb-4"},"※ 座位區、演唱會與評論皆需填寫，若有缺漏會新增失敗。",-1)),Ue={class:"relative flex items-center"},Me={class:"flex items-center"},Ne={class:"relative flex items-center mb-4"},Be={key:0},De={key:1},Pe={class:"space-y-4"},Re=C(()=>t("span",{class:"text-sm text-black-60"},"圖片至多可傳三張",-1)),Ee={class:"flex justify-center space-x-4"},Fe={key:0,id:"commentImage1",class:"size-[80px] lg:size-[150px]",src:"http://placehold.it/150",alt:"your image"},He={key:1,id:"commentImage2",class:"size-[80px] lg:size-[150px]",src:"http://placehold.it/150",alt:"your image"},Oe={key:2,id:"commentImage3",class:"size-[80px] lg:size-[150px]",src:"http://placehold.it/150",alt:"your image"},Je={class:"flex justify-center items-center"},Ke={class:"flex justify-center items-center space-x-2"},Qe={class:"col-span-2 sm:col-span-1"},We=["src","alt"],Ye={class:"col-span-8 sm:col-span-9 md:col-span-10 flex flex-col space-y-4"},Ge={class:"space-x-3"},Xe={class:"text-black-40"},Ze={class:"text-sm md:text-base lg:flex lg:flex-wrap lg:justify-between"},et={class:"mb-4 lg:mb-0"},tt={key:0,class:"flex space-x-3 w-full lg:w-auto"},st=["src"],lt={class:"text-tiny text-black-60"},at={class:"truncate mb-2"},ot={class:"col-span-2 md:col-span-1"},nt=C(()=>t("span",null,"檢舉該名使用者",-1)),it={class:"marquee-type bg-tiffany"},rt={ref:"marquee",class:"flex text-[3.5rem] md:text-[4.5rem] lg:text-[6.5rem] font-black text-black tracking-widest whitespace-nowrap overflow-x-auto scrollbar-none mb-6 lg:mb-10 leading-[1]"},ct={class:"marquee space-x-4"},dt={class:"text-stroke-black font-display uppercase"},ut={class:"text-stroke-black font-display uppercase"},pt={class:"marquee space-x-4"},mt={class:"text-stroke-black font-display uppercase"},ft={class:"text-stroke-black font-display uppercase"},_t={class:"container"},gt={class:"mt-4 lg:mt-6"},ht={class:"mb-4 lg:mb-6"},bt=["src"],vt={class:"space-y-6 lg:space-y-10"},yt={class:"flex gap-4 font-black -mb-[18px] lg:-mb-[33px] pt-8 lg:pt-[42px]"},xt={class:"text-lg sm:text-2xl lg:text-4xl"},kt={class:"list-disc text-base px-6 space-y-4 lg:-mt-16 lg:w-3/4 hidden lg:block lg:opacity-0"},wt={class:"list-disc text-base px-6 lg:px-0 space-y-4 mt-6 lg:mt-4 lg:w-2/3 lg:absolute lg:top-0"},{setIsLoading:L}=F(),{toast:h}=H(),Ct={data(){return{commentSeatArea:"",concertId:"",commentContent:"",images:[],checkPolicy:!0,openCommentModal:!1,accordionItems:[]}},props:["id"],inject:["http","path"],methods:{hoverTitle(i){i.currentTarget.childNodes.forEach((e,n)=>{n!==1&&e.classList.remove("hidden","collapse-left","collapse-right"),n===0?e.classList.add("collapse-left","show"):n===2&&e.classList.add("collapse-right","show")})},removeHoverTitle(i){i.currentTarget.childNodes.forEach((e,n)=>{n!==1&&e.classList.remove("w-auto","collapse-left","collapse-right","show"),n===0?e.classList.add("collapse-left"):n===2&&e.classList.add("collapse-right")})},readURL(i){if(i.target.files&&i.target.files[0]){if(i.target.files.length>3){h({title:"圖片最多3張",description:""});return}for(let e=0;e<i.target.files.length;e++){const n=new FileReader;n.onload=function(y){document.querySelector("#commentImage"+(e+1)).setAttribute("src",y.target.result)},n.readAsDataURL(i.target.files[e])}this.images=[...i.target.files]}},handleFileButton(){document.querySelector("#commentPictures").click()},onSubmit(i){i.preventDefault(),this.postComment()},postComment(){if(this.concertId===""){h({title:"請選擇演唱會",description:""});return}if(this.commentSeatArea===""){h({title:"請選擇座位區",description:""});return}if(this.commentContent===""){h({title:"請輸入評論",description:""});return}if(!this.checkPolicy){h({title:"請先勾選同意評論規範",description:""});return}const i={concert_id:this.concertId,seat_area:this.commentSeatArea,comment:this.commentContent,images:this.images};this.images.length===0&&delete i.images,L(),O.post(`${this.path.venues}/${this.$route.params.id}/comment`,i).then(e=>{this.resetComment(),h({title:"已新增評論",description:""}),this.getVenue(this.$route.params.id),this.openCommentModal=!1}).catch(e=>{console.log(e)}).finally(()=>{L()})},resetComment(){this.concertId="",this.commentSeatArea="",this.commentContent="",this.images=[]},showCommentPolicy(){h({title:"評論規範",description:"(1)請勿留言不實評論 (2)請物留言惡意評論 (3)請勿留言腥羶色內容。請注意警告五次將被永久停權。"})},openModal(i){this.openCommentModal=i,i===!1&&this.resetComment()},handleMarQuee(){this.$refs.marquee.childNodes.forEach(e=>{e.textContent.length<=90&&e.textContent.length>60?e.style.animationDuration="80s":e.textContent.length<=120&&e.textContent.length>90&&(e.style.animationDuration="90s")})},...J(j,["getVenue","reportUser"])},computed:{...K(j,["venue","pagination","filterSeatComment","transportation"]),...Q(j,["seatArea"])},watch:{id(i){this.getVenue(i)}},mounted(){this.getVenue(this.id)},updated(){document.querySelectorAll(".accordion-button").forEach(e=>{var n;((n=e==null?void 0:e.dataset)==null?void 0:n.state)==="open"&&(e==null||e.click())})}},Vt=Object.assign(Ct,{__name:"VenueSingleView",setup(i){return(e,n)=>{var b;const y=ne("font-awesome-icon");return c(),d(p,null,[t("div",{class:"w-full h-[400px] md:h-[600px] lg:h-[850px] bg-no-repeat bg-cover absolute top-0 -z-10 bg-center 2xl:bg-bottom shadow",style:W(`background-image: url(${(b=e.venue.picture)==null?void 0:b.horizontal})`)},null,4),t("section",ve,[t("div",ye,[t("h2",xe,r(e.venue.title),1)]),t("main",ke,[t("div",we,r(e.venue.address),1),t("div",{class:"hidden lg:grid grid-cols-3 text-lg text-center",onMouseover:n[0]||(n[0]=(...o)=>e.hoverTitle&&e.hoverTitle(...o)),onMouseleave:n[1]||(n[1]=(...o)=>e.removeHoverTitle&&e.removeHoverTitle(...o))},[t("div",Ce,r(e.venue.seat_amount)+" 席次",1),t("div",Ve,r(e.venue.eng_title),1),t("div",$e,r(e.venue.address),1)],32),l(q,{class:"flex justify-center"},{subTitle:a(()=>[u(" VENUES ")]),mainTitle:a(()=>[u(" 場地體驗 ")]),_:1}),t("div",Se,[t("div",Ie,[t("img",{src:e.venue.seat_picture,alt:e.venue.title,class:"w-full"},null,8,ze)]),t("div",Te,[t("div",Ae,[l(s(A),{modelValue:e.seatArea,"onUpdate:modelValue":n[2]||(n[2]=o=>e.seatArea=o)},{default:a(()=>[l(s($),{class:"w-1/3 border-0 text-primary bg-pink box-shadow-pink-blur box-shadow-pink-blur-hover focus-visible:outline-0 h-10 p-4 md:py-4 md:px-6 lg:py-6 lg:px-8 rounded-btn1"},{default:a(()=>[l(s(S),{placeholder:"座位區"})]),_:1}),l(s(I),null,{default:a(()=>[l(s(z),null,{default:a(()=>[l(s(T),null,{default:a(()=>[u("座位區")]),_:1}),l(s(w),{value:"all"},{default:a(()=>[u(" 全部座位區 ")]),_:1}),(c(!0),d(p,null,_(e.venue.seat_areas,o=>(c(),x(s(w),{value:o,key:o},{default:a(()=>[u(r(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",je,[l(s(le),{open:e.openCommentModal,"onUpdate:open":e.openModal},{default:a(()=>[l(s(Y),{"as-child":""},{default:a(()=>[l(s(g),{variant:"ghost",class:"space-x-4 md:text-lg lg:text-xl"},{default:a(()=>[qe,l(y,{icon:"fa-solid fa-plus"})]),_:1})]),_:1}),l(s(G),{class:"max-w-sm md:max-w-xl"},{default:a(()=>[l(s(X),{class:v(["mb-6",{"w-[90%]":e.concertId,"md:w-full":e.concertId}])},{default:a(()=>[l(s(Z),null,{default:a(()=>[u("留下評論")]),_:1}),l(s(ee),null,{default:a(()=>[Le]),_:1})]),_:1},8,["class"]),t("form",{onSubmit:n[7]||(n[7]=(...o)=>e.onSubmit&&e.onSubmit(...o)),class:v(["space-y-6 lg:space-y-10",{"w-[90%]":e.concertId,"md:w-full":e.concertId}])},[t("div",Ue,[l(s(V),{for:"seat-select",class:"absolute text-white bg-black-85 border-black-85 border rounded-md pl-6 pr-20 -z-10 py-2 px-3"},{default:a(()=>[u("座位區")]),_:1}),l(s(A),{modelValue:e.commentSeatArea,"onUpdate:modelValue":n[3]||(n[3]=o=>e.commentSeatArea=o),id:"seat-select"},{default:a(()=>[l(s($),{class:"ml-[7rem] border-white"},{default:a(()=>[l(s(S),{placeholder:"選取座位區"})]),_:1}),l(s(I),null,{default:a(()=>[l(s(z),null,{default:a(()=>[l(s(T),null,{default:a(()=>[u("選取座位區")]),_:1}),(c(!0),d(p,null,_(e.venue.seat_areas,o=>(c(),x(s(w),{value:o,key:o},{default:a(()=>[u(r(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",Me,[l(s(V),{for:"concert-select",class:"absolute text-white bg-black-85 border-black-85 border rounded-md pl-6 pr-20 -z-10 py-2 px-3"},{default:a(()=>[u("演唱會")]),_:1}),l(s(A),{id:"concert-select",modelValue:e.concertId,"onUpdate:modelValue":n[4]||(n[4]=o=>e.concertId=o)},{default:a(()=>[l(s($),{class:v(["ml-[7rem] border-white",{"w-3/5":e.concertId,"md:w-full":e.concertId}])},{default:a(()=>[l(s(S),{placeholder:"選取演唱會"})]),_:1},8,["class"]),l(s(I),null,{default:a(()=>[l(s(z),null,{default:a(()=>[l(s(T),null,{default:a(()=>[u("選取演唱會")]),_:1}),(c(!0),d(p,null,_(e.venue.concerts,o=>(c(),x(s(w),{value:o.id.toString(),key:o.id},{default:a(()=>[u(r(o.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",null,[t("div",Ne,[l(s(V),{for:"commentPictures",class:"absolute text-white bg-black-85 border-black-85 border rounded-md pl-6 pr-20 -z-10 py-2 px-3"},{default:a(()=>[u("評論圖片")]),_:1}),t("input",{id:"commentPictures",multiple:"",class:"hidden",type:"file",accept:"image/png, image/jpeg",onChange:n[5]||(n[5]=(...o)=>e.readURL&&e.readURL(...o))},null,32),l(s(g),{type:"button",class:"ml-[7rem] border-white border w-full rounded-md justify-start text-sm px-3",onClick:e.handleFileButton},{default:a(()=>[e.images.length?(c(),d("span",De,"已選擇"+r(e.images.length)+"個檔案",1)):(c(),d("span",Be,"未選擇任何檔案"))]),_:1},8,["onClick"])]),t("div",Pe,[Re,t("div",Ee,[e.images[0]?(c(),d("img",Fe)):k("",!0),e.images[1]?(c(),d("img",He)):k("",!0),e.images[2]?(c(),d("img",Oe)):k("",!0)])])]),t("div",null,[l(s(be),{modelValue:e.commentContent,"onUpdate:modelValue":n[6]||(n[6]=o=>e.commentContent=o),placeholder:"留下你的評論..."},null,8,["modelValue"])]),l(s(te),{class:"justify-center sm:justify-center flex-col sm:flex-col space-y-2"},{default:a(()=>[t("div",Je,[l(s(g),{for:"commentPolicy",type:"button",class:"text-sm text-black-60 text-right cursor-pointer px-0",onClick:e.showCommentPolicy},{default:a(()=>[u("送出即代表您同意遵守評論規範")]),_:1},8,["onClick"])]),t("div",Ke,[l(s(se),{"as-child":""},{default:a(()=>[l(s(g),{type:"button",size:"base",class:"bg-black-80 hover:bg-black-80 px-14 md:px-14 lg:px-14"},{default:a(()=>[u("取消")]),_:1})]),_:1}),l(s(g),{variant:"tiffany-fill",size:"base",type:"submit",class:"px-14 md:px-14 lg:px-14"},{default:a(()=>[u("送出評論")]),_:1})])]),_:1})],34)]),_:1})]),_:1},8,["open","onUpdate:open"])])]),l(s(ae),{class:"lg:h-[280px] xl:h-[350px]"},{default:a(()=>[(c(!0),d(p,null,_(e.filterSeatComment,(o,m)=>(c(),d("div",{key:o.id,class:v(["grid grid-cols-12 gap-x-4 border-b border-black-60 py-10 min-h-[150px] mt-6",{"border-t":m===0}])},[t("div",Qe,[t("img",{src:o.user.profile_image_url,alt:o.user.name,class:"rounded-full size-8 2xl:size-12"},null,8,We)]),t("div",Ye,[t("div",Ge,[t("span",null,r(o.user.name),1),t("span",Xe,r(o.seat_area),1)]),t("div",Ze,[t("p",et,r(o.comment),1),o.images.length?(c(),d("div",tt,[(c(!0),d(p,null,_(o.images,(f,U)=>(c(),d("img",{key:U,src:f,alt:"",class:"size-20 object-cover rounded-xl"},null,8,st))),128))])):k("",!0)]),t("div",lt,[t("p",at,r(o.concert.title),1),t("time",null,r(o.created_at),1)])]),t("div",ot,[l(s(me),{openDelay:0},{default:a(()=>[l(s(fe),{"as-child":""},{default:a(()=>[l(s(g),{variant:"ghost",class:"p-1"},{default:a(()=>[l(s(ge))]),_:1})]),_:1}),l(s(_e),null,{default:a(()=>[l(s(g),{onClick:f=>e.reportUser(o.user.name),class:"justify-between w-full"},{default:a(()=>[nt,l(s(he))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])],2))),128))]),_:1})])])])]),t("div",null,[t("div",it,[t("div",rt,[t("p",ct,[t("span",null,r(e.venue.title),1),t("span",dt,r(e.venue.eng_title),1),t("span",null,r(e.venue.title),1),t("span",ut,r(e.venue.eng_title),1)]),t("p",pt,[t("span",null,r(e.venue.title),1),t("span",mt,r(e.venue.eng_title),1),t("span",null,r(e.venue.title),1),t("span",ft,r(e.venue.eng_title),1)])],512)])]),t("section",_t,[l(q,{class:"overflow-x-hidden"},{subTitle:a(()=>[u(" TRANSPORT ")]),mainTitle:a(()=>[u(" 交通方式 ")]),_:1}),t("div",gt,[t("div",ht,[t("iframe",{src:e.venue.map_link,frameborder:"0",class:"w-full h-[375px] md:h-[600px]"},null,8,bt)]),t("div",vt,[l(s(pe),{type:"single",collapsible:""},{default:a(()=>[(c(!0),d(p,null,_(e.transportation,o=>(c(),x(s(ue),{class:"lg:relative border-b-4",key:o.type,value:o.value},{default:a(()=>[l(s(ce),{hideIcon:!0,value:o.value,class:"accordion-button hover:no-underline"},{default:a(()=>[t("div",yt,[l(s(oe),{class:"size-10 lg:size-16 pb-2 sm:pb-0 lg:pb-2"}),t("span",xt,r(o.type),1)])]),_:2},1032,["value"]),l(s(de),{class:"lg:flex lg:justify-end"},{default:a(()=>[t("ul",kt,[(c(!0),d(p,null,_(o.info,(m,f)=>(c(),d("li",{key:f},r(m),1))),128))]),t("ul",wt,[(c(!0),d(p,null,_(o.info,(m,f)=>(c(),d("li",{key:f},r(m),1))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})])])])],64)}}}),Ut=E(Vt,[["__scopeId","data-v-98074b1b"]]);export{Ut as default};
