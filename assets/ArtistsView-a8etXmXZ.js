import{K as C,a5 as A,y as $,x,a6 as B,a7 as P,c as d,a as r,b as e,w as i,F as f,r as m,g as h,f as b,z as s,a8 as T,a9 as S,o as n,G as _,D,t as u,aa as j,ab as I,ac as V,ad as W,ae as L,af as M,ag as N,ah as z,ai as R,aj as q,C as E,ak as G,al as J,d as F}from"./index-mLlWXRmv.js";import{_ as K}from"./BannerComponent-Dp8_lcht.js";import{_ as O,a as U,b as Z,c as H,d as Q}from"./PaginationPrev-Hgi895Hw.js";import{u as X}from"./artists-PUCQsp5x.js";import"./more-horizontal-IUQJm4PV.js";const Y={class:"container relative pb-[128px] lg:pb-[192px]"},tt={class:"grid grid-flow-col"},at={class:"mb-4 lg:mb-14 mt-4"},et={class:"w-full flex flex-wrap gap-4"},st=["onClick"],ot={key:0,class:"p-14 font-semibold tracking-tighter text-base lg:text-lg text-white text-center"},lt={class:"w-[100%] mx-auto grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"},it=["src","alt"],nt={class:"ml-4"},rt={class:"text-base lg:text-lg"},ct={class:"flex gap-3"},dt={class:"text-tiny text-black-40"},ut={class:"text-tiny text-black-60 hidden xs:block"},_t={class:"text-tiny text-black-60 block xs:hidden"},ft={key:0,class:"basic-follow tiffany-outline text-base"},ht=["onClick"],pt=r("hr",{class:"border-b-2 border-black-40"},null,-1),{toast:gt}=C(),{setIsLoading:p}=A(),mt={data(){return{activeFilterCountry:"",isFollowActive:{},bannerInputPlaceholder:"輸入表演者名稱",searchPage:1,aristData:{artists:[],searchWord:"",pagination:{},param:""},countries:[{id:1,location:"全部"},{id:2,location:"台灣"},{id:3,location:"日本"},{id:4,location:"韓國"},{id:5,location:"歐美"},{id:6,location:"其它"}]}},computed:{...$(T,["AccessToken"])},methods:{...x(X,["postFollowConcetsData","deleteFollowConcetsData"]),async toggleFollowArtists(o,t){o?this.handleFollowAction(t,"刪除","刪除追蹤成功"):this.handleFollowAction(t,"新增","追蹤成功")},async getArtistsData(o=1){try{const t=await B(o);this.aristData.artists=t.data.data,this.aristData.pagination=t.data.pagination}catch(t){console.error(t)}},FilterByCountry(o="全部"){this.activeFilterCountry=o,o==="全部"?this.aristData.param="":this.aristData.param=o,p(),this.searchArtists(this.aristData.searchWord),setTimeout(()=>{p()},500)},FilterByPage(o){p(),this.searchArtists(this.aristData.searchWord,o),setTimeout(()=>{p()},500)},searchArtists:P(async function(o,t=1){this.aristData.searchWord=o,this.searchPage=t;try{const l=await S(this.aristData.searchWord,this.aristData.param,t);this.aristData.artists=l.data.data,this.aristData.pagination=l.data.pagination}catch(l){console.error(l)}},300),handleFollowAction(o,t,l){(t==="新增"?this.postFollowConcetsData:this.deleteFollowConcetsData)(o).then(()=>this.getArtistsData()).then(()=>{setTimeout(()=>this.toastMsg(l),300)})},toastMsg(o){gt({title:o,description:""})}},mounted(){this.getArtistsData(),this.FilterByCountry()}},vt=Object.assign(mt,{__name:"ArtistsView",setup(o){return(t,l)=>{var y,w;const k=F("RouterLink"),v=F("router-link");return n(),d("main",Y,[r("section",tt,[e(K,{"prop-placeholder":t.bannerInputPlaceholder,onSearchMethod:t.searchArtists},{mainTitle:i(()=>[_("ARTISTS")]),_:1},8,["prop-placeholder","onSearchMethod"])]),r("section",at,[r("div",et,[(n(!0),d(f,null,m(t.countries,a=>(n(),d("button",{class:D(["basic",[t.activeFilterCountry===a.location?"pink-fill":"pink-outline"]]),onClick:g=>t.FilterByCountry(a.location),key:a.id},u(a.location),11,st))),128))])]),r("section",null,[(y=t.aristData.artists)!=null&&y.length?h("",!0):(n(),d("p",ot,"抱歉，搜尋不到相關資源")),r("ul",lt,[(n(!0),d(f,null,m(t.aristData.artists,a=>(n(),d("li",{key:a.id,class:"flex flex-row justify-between items-center px-4 py-3 md:border-2 border-black-80 rounded-2xl"},[e(k,{to:`/artists/${a.id}`,class:"w-[81%] flex items-center"},{default:i(()=>[r("img",{class:"size-[70px] object-cover rounded-full",src:a.cover_urls.square,alt:a.name},null,8,it),r("div",nt,[r("p",rt,u(a.name),1),r("div",ct,[r("p",dt,u(a.follower_count)+" 位粉絲",1),r("p",ut,u(a.concert_count)+" 場演唱會",1)]),r("p",_t,u(a.concert_count)+" concerts",1)])]),_:2},1032,["to"]),e(s(R),null,{default:i(()=>[e(s(j),{class:"flex"},{default:i(()=>[t.AccessToken?h("",!0):(n(),d("button",ft,"Follow"))]),_:1}),e(s(I),null,{default:i(()=>[e(s(V),null,{default:i(()=>[e(s(W),null,{default:i(()=>[_("請登入後追蹤")]),_:1}),e(s(L))]),_:1}),e(s(M),null,{default:i(()=>[e(s(N),null,{default:i(()=>[_("取消")]),_:1}),e(s(z),{asChild:""},{default:i(()=>[e(v,{to:"/login"},{default:i(()=>[_(" 前往登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t.AccessToken?(n(),d("button",{key:a==null?void 0:a.id,class:D(["basic-follow text-base",a.is_followed?"tiffany-follow":"tiffany-outline"]),onClick:g=>t.toggleFollowArtists(a.is_followed,a.id)},u(a.is_followed?"Following":"Follow"),11,ht)):h("",!0)]))),128))])]),(w=t.aristData.artists)!=null&&w.length?(n(),b(s(J),{key:0,page:t.searchPage,total:t.aristData.pagination.total_pages*10,"sibling-count":1,"show-edges":"","default-page":1,class:"flex justify-center my-5 lg:my-12 pt-16"},{default:i(({page:a})=>[e(s(G),{class:"flex items-center gap-1"},{default:i(({items:g})=>[e(s(O),{onClick:l[0]||(l[0]=c=>t.FilterByPage(1))}),e(s(U),{onClick:l[1]||(l[1]=c=>t.FilterByPage(t.aristData.pagination.current_page-1))}),(n(!0),d(f,null,m(g,c=>(n(),d(f,null,[c.type==="page"?(n(),b(s(q),{key:c,value:c.value,"as-child":""},{default:i(()=>[e(s(E),{class:"w-10 h-10 p-0",variant:c.value===a?"default":"outline",onClick:bt=>t.FilterByPage(c.value),disabled:c.value===a},{default:i(()=>[_(u(c.value),1)]),_:2},1032,["variant","onClick","disabled"])]),_:2},1032,["value"])):(n(),b(s(Z),{key:c.type,index:t.index},null,8,["index"]))],64))),256)),e(s(H),{onClick:l[2]||(l[2]=c=>t.FilterByPage(t.aristData.pagination.current_page+1))}),e(s(Q),{onClick:l[3]||(l[3]=c=>t.FilterByPage(t.aristData.pagination.total_pages))})]),_:2},1024)]),_:1},8,["page","total"])):h("",!0),pt])}}});export{vt as default};
