import{K as Z,b4 as U,M as ee,x as L,y as F,aS as G,o,f as c,w as a,b as t,z as e,aw as T,G as n,ax as te,av as ae,a as d,c as m,r as V,t as h,F as b,a4 as R,C as g,g as S,U as q,ay as se,aT as le,au as ie,az as ne,aa as z,ab as O,ac as M,ad as I,ae as N,af as j,ag as E,ah as B,ai as D}from"./index-eFt3E1dW.js";import{_ as de}from"./Checkbox-Ja2XeUGz.js";import{a as P,b as k,_ as oe,d as $,c as re,e as me}from"./TableRow-jKaJubsk.js";import{f as W,_ as K,a as H,b as J,c as Q,d as X,e as C}from"./SelectLabel-CFQM4YIF.js";import{_ as f}from"./Label-Nf23hPy4.js";import{_ as ue}from"./DialogClose-gDCXELSy.js";import{u as v}from"./venues-ruVMCUO2.js";import{g as w,j as pe,e as p,E as _,h as ce}from"./vee-validate.esm-0qkOITYB.js";import{r as fe,s as _e,a as ge,n as he,u as ye}from"./vee-validate-rules.esm-n-CF2EOB.js";import{l as Ve}from"./vee-validate-i18n.esm-ZqaKjB89.js";import"./check-qAIwXk15.js";const be={class:"grid grid-cols-2 place-items-start gap-6"},ve={class:"grid grid-cols-1 gap-3"},Ae={class:"grid grid-cols-4 items-center gap-x-3"},ke={class:"grid grid-cols-4 items-center gap-x-3"},$e={class:"grid grid-cols-4 items-center gap-x-3"},xe={class:"grid grid-cols-4 items-center gap-x-3"},we={class:"grid grid-cols-4 items-start gap-x-3"},Se={class:"col-span-3 grid grid-cols-6 gap-3"},Ce={class:"col-span-2 flex justify-start px-1"},Ue=d("span",{class:"material-symbols-outlined hover:scale-110"},"add_circle",-1),Te=d("span",{class:"material-symbols-outlined hover:scale-110"},"edit",-1),qe=["value"],ze={class:"rounded-full bg-secondary px-3 py-1 text-sm"},Oe=d("span",{class:"material-symbols-outlined"},"do_not_disturb_on",-1),Me={class:"grid grid-cols-4 items-center gap-x-3"},Ie={class:"grid grid-cols-4 items-center gap-x-3"},Ne=d("span",{class:"-mt-3 text-tiny text-black-60"},"※ 請輸入 Google 地圖連結",-1),je={class:"grid grid-cols-1 gap-3"},Ee={class:"grid grid-cols-4 items-center gap-x-3"},Be=["src"],De={key:1,class:"-mt-3 text-tiny text-black-60"},Pe={class:"grid grid-cols-4 items-center gap-x-3"},Le=["src"],Fe={key:3,class:"-mt-3 text-tiny text-black-60"},Ge={class:"grid grid-cols-4 items-center gap-x-3"},Re=["src"],We={key:5,class:"-mt-3 text-tiny text-black-60"},Ke={class:"flex flex-col item-start gap-x-3"},He={class:"flex justify-start items-center py-2"},Je=d("p",{class:"text-sm border-b-2 border-primary p-2 me-4"},"交通方式",-1),Qe=d("span",{class:"material-symbols-outlined me-2"},"add_circle",-1),Xe=d("span",null,"新增欄位",-1),Ye={key:0,class:"my-3"},{toast:x}=Z();w("required",fe);w("size",_e);w("alphaDash",ge);w("numeric",he);w("url",ye);pe({generateMessage:Ve("zh_TW",{messages:{required:"必填欄位",size:"圖片不能超過 3MB",alphaDash:"須為英數、破折號及底線的組合",numeric:"須為數字",url:"須為有效的連結",width:"圖片寬度必須大於 1800 像素"}}),validateOnInput:!0});const Ze={data(){return{tempSeatArea:"",canEditSeats:!1}},methods:{readImg(u,s,i){const l=u.target.files[0];l.size>3*1024**2||(i==="seat"?this.tempAdminVenue.seat_picture=l:this.tempAdminVenue.picture[`${i}`]=l,this.imageUrl[s]=URL.createObjectURL(l))},resetAddVenue(){this.imageUrl=[],this.tempSeatArea="",this.canEditSeats=!1,this.tempAdminVenue={picture:{},seat_areas:[],transportation:[{type:"",info:""}]}},addSeatArea(u){this.tempAdminVenue.seat_areas.push(u),this.tempSeatArea=""},editSeatOptions(){this.canEditSeats?this.canEditSeats=!1:this.canEditSeats=!0},removeSeat(u){this.tempAdminVenue.seat_areas.splice(u,1),this.tempAdminVenue.seat_areas.length===0&&(this.canEditSeats=!1)},addInputGroup(){this.tempAdminVenue.transportation.push({type:"",info:""})},onSubmit(){if(this.imageUrl.length!==3){x({title:"請確認所有圖檔都上傳了"});return}let u=U.venues;this.isNew||(u=`${U.venues}/${this.tempAdminVenue.id}`,this.tempAdminVenue._method="PUT"),ee.post(u,this.tempAdminVenue).then(()=>{this.isNew?x({title:"新增成功"}):x({title:"編輯成功"}),this.isModalOpen=!1,this.resetAddVenue(),this.getAdminVenues()}).catch(()=>{this.isNew?x({title:"新增失敗"}):x({title:"編輯失敗"})})},...L(v,["getAdminVenues"])},computed:{...F(v,["adminVenues","adminCityOptions"]),...G(v,["adminCity","adminSearchText","isModalOpen","isNew","tempAdminVenue","imageUrl"])},watch:{isModalOpen:"resetAddVenue"}},Y=Object.assign(Ze,{__name:"VenueModal",setup(u){return(s,i)=>(o(),c(e(le),{class:"sm:max-w-[850px]"},{default:a(()=>[t(e(ae),null,{default:a(()=>[s.isNew?(o(),c(e(T),{key:0,class:"text-center"},{default:a(()=>[n("新增場地")]),_:1})):(o(),c(e(T),{key:1,class:"text-center"},{default:a(()=>[n("編輯場地")]),_:1})),t(e(te))]),_:1}),t(e(ce),{onSubmit:s.onSubmit},{default:a(()=>[d("section",be,[d("section",ve,[d("div",Ae,[t(e(f),{for:"title",class:"text-left"},{default:a(()=>[n("中文名稱")]),_:1}),t(e(p),{name:"title",type:"text",rules:"required",class:"col-span-3 form-field",modelValue:s.tempAdminVenue.title,"onUpdate:modelValue":i[0]||(i[0]=l=>s.tempAdminVenue.title=l)},null,8,["modelValue"]),t(e(_),{name:"title",class:"errorText"})]),d("div",ke,[t(e(f),{for:"eng_title",class:"text-left"},{default:a(()=>[n("英文名稱")]),_:1}),t(e(p),{name:"eng_title",type:"text",rules:"required",class:"col-span-3 form-field",modelValue:s.tempAdminVenue.eng_title,"onUpdate:modelValue":i[1]||(i[1]=l=>s.tempAdminVenue.eng_title=l)},null,8,["modelValue"]),t(e(_),{name:"eng_title",class:"errorText"})]),d("div",$e,[t(e(f),{for:"address",class:"text-left"},{default:a(()=>[n("地址")]),_:1}),t(e(p),{name:"address",type:"text",rules:"required",class:"col-span-3 form-field",modelValue:s.tempAdminVenue.address,"onUpdate:modelValue":i[2]||(i[2]=l=>s.tempAdminVenue.address=l)},null,8,["modelValue"]),t(e(_),{name:"address",class:"errorText"})]),d("div",xe,[t(e(f),{for:"city",class:"text-left"},{default:a(()=>[n("地區")]),_:1}),t(e(p),{name:"city",rules:"required",class:"col-span-3",modelValue:s.tempAdminVenue.city,"onUpdate:modelValue":i[4]||(i[4]=l=>s.tempAdminVenue.city=l)},{default:a(()=>[t(e(W),{modelValue:s.tempAdminVenue.city,"onUpdate:modelValue":i[3]||(i[3]=l=>s.tempAdminVenue.city=l)},{default:a(()=>[t(e(K),{class:"w-full col-span-3"},{default:a(()=>[t(e(H),{placeholder:"地區"})]),_:1}),t(e(J),null,{default:a(()=>[t(e(Q),null,{default:a(()=>[t(e(X),{class:"tracking-wide"},{default:a(()=>[n("地區")]),_:1}),(o(!0),m(b,null,V(s.adminCityOptions,l=>(o(),c(e(C),{key:l,value:l},{default:a(()=>[n(h(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(_),{name:"city",class:"errorText"})]),_:1},8,["modelValue"])]),d("div",we,[t(e(f),{for:"seat_areas",class:"text-left py-2"},{default:a(()=>[n("座位區分類")]),_:1}),d("div",Se,[t(e(R),{modelValue:s.tempSeatArea,"onUpdate:modelValue":i[5]||(i[5]=l=>s.tempSeatArea=l),disabled:s.canEditSeats,type:"text",class:"col-span-4"},null,8,["modelValue","disabled"]),d("div",Ce,[t(e(g),{type:"button",variant:"none",disabled:!s.tempSeatArea,class:"w-10 hover:text-[#6366f1]",onClick:i[6]||(i[6]=l=>s.addSeatArea(s.tempSeatArea))},{default:a(()=>[Ue]),_:1},8,["disabled"]),s.tempAdminVenue.seat_areas!==[]?(o(),c(e(g),{key:0,type:"button",variant:"none",class:"w-10 hover:text-[#6366f1]",onClick:s.editSeatOptions},{default:a(()=>[Te]),_:1},8,["onClick"])):S("",!0)]),t(e(_),{name:"seat_areas",class:"errorText",style:{padding:"0px"}}),t(e(p),{name:"seat_areas",rules:"required",modelValue:s.tempAdminVenue.seat_areas,"onUpdate:modelValue":i[7]||(i[7]=l=>s.tempAdminVenue.seat_areas=l)},{default:a(({field:l})=>[d("div",q(l,{value:s.tempAdminVenue.seat_areas,class:"col-span-6 flex flex-wrap gap-x-1 gap-y-3"}),[(o(!0),m(b,null,V(s.tempAdminVenue.seat_areas,(r,A)=>(o(),m("div",{key:A,class:"relative me-4"},[d("p",ze,h(r),1),s.canEditSeats?(o(),c(e(g),{key:0,type:"button",variant:"none",class:"w-10 h-10 absolute -top-3 -right-5 motion-safe:animate-bounce",onClick:y=>s.removeSeat(A)},{default:a(()=>[Oe]),_:2},1032,["onClick"])):S("",!0)]))),128))],16,qe)]),_:1},8,["modelValue"])])]),d("div",Me,[t(e(f),{for:"seat_amount",class:"text-left"},{default:a(()=>[n("座位數量")]),_:1}),t(e(p),{name:"seat_amount",type:"text",rules:"required|numeric",class:"col-span-3 form-field",modelValue:s.tempAdminVenue.seat_amount,"onUpdate:modelValue":i[8]||(i[8]=l=>s.tempAdminVenue.seat_amount=l)},null,8,["modelValue"]),t(e(_),{name:"seat_amount",class:"errorText"})]),d("div",Ie,[t(e(f),{for:"map_link",class:"text-left"},{default:a(()=>[n("地圖連結")]),_:1}),t(e(p),{name:"map_link",type:"text",rules:"required|url",class:"col-span-3 form-field",modelValue:s.tempAdminVenue.map_link,"onUpdate:modelValue":i[9]||(i[9]=l=>s.tempAdminVenue.map_link=l)},null,8,["modelValue"]),t(e(_),{name:"map_link",class:"errorText"})]),Ne]),d("section",je,[d("div",Ee,[t(e(f),{for:"picture_horizontal",class:"text-left"},{default:a(()=>[n(" 圖片 - 橫圖 ")]),_:1}),s.isNew?(o(),c(e(p),{key:0,name:"picture_horizontal",rules:"required|size:3072",type:"file",accept:"image/png, image/jpeg, image/webp",class:"fieldStyle col-span-3 hover:bg-accent",onChange:i[10]||(i[10]=l=>s.readImg(l,0,"horizontal"))})):(o(),c(e(p),{key:1,name:"picture_horizontal",type:"file",accept:"image/png, image/jpeg, image/webp",class:"fieldStyle col-span-3 hover:bg-accent",onChange:i[11]||(i[11]=l=>s.readImg(l,0,"horizontal"))})),t(e(_),{name:"picture_horizontal",class:"errorText"})]),s.imageUrl[0]?(o(),m("img",{key:0,src:s.imageUrl[0],alt:"Preview Image",class:"max-w-[150px] max-h-[150px]"},null,8,Be)):(o(),m("span",De,"※ 圖片不能超過 3MB、圖片寬度必須大於 1800 像素")),d("div",Pe,[t(e(f),{for:"picture_square",class:"text-left"},{default:a(()=>[n(" 圖片 - 方圖 ")]),_:1}),s.isNew?(o(),c(e(p),{key:0,name:"picture_square",rules:"required|size:3072",type:"file",accept:"image/png, image/jpeg, image/webp",class:"fieldStyle col-span-3 hover:bg-accent",onChange:i[12]||(i[12]=l=>s.readImg(l,1,"square"))})):(o(),c(e(p),{key:1,name:"picture_square",type:"file",accept:"image/png, image/jpeg, image/webp",class:"fieldStyle col-span-3 hover:bg-accent",onChange:i[13]||(i[13]=l=>s.readImg(l,1,"square"))})),t(e(_),{name:"picture_square",class:"errorText"})]),s.imageUrl[1]?(o(),m("img",{key:2,src:s.imageUrl[1],alt:"Preview Image",class:"max-w-[150px] max-h-[150px]"},null,8,Le)):(o(),m("span",Fe,"※ 圖片不能超過 3MB")),d("div",Ge,[t(e(f),{for:"seat_picture",class:"text-left"},{default:a(()=>[n(" 座位圖 ")]),_:1}),s.isNew?(o(),c(e(p),{key:0,name:"seat_picture",rules:"required|size:3072",type:"file",accept:"image/png, image/jpeg, image/webp",class:"fieldStyle col-span-3 hover:bg-accent",onChange:i[14]||(i[14]=l=>s.readImg(l,2,"seat"))})):(o(),c(e(p),{key:1,name:"seat_picture",type:"file",accept:"image/png, image/jpeg, image/webp",class:"fieldStyle col-span-3 hover:bg-accent",onChange:i[15]||(i[15]=l=>s.readImg(l,2,"seat"))})),t(e(_),{name:"seat_picture",class:"errorText"})]),s.imageUrl[2]?(o(),m("img",{key:4,src:s.imageUrl[2],alt:"Preview Image",class:"max-w-[150px] max-h-[150px]"},null,8,Re)):(o(),m("span",We,"※ 圖片不能超過 3MB")),d("div",Ke,[d("div",He,[Je,t(e(g),{disabled:!s.tempAdminVenue.transportation[s.tempAdminVenue.transportation.length-1].type||!s.tempAdminVenue.transportation[s.tempAdminVenue.transportation.length-1].info,type:"button",variant:"none",class:"text-sm rounded-[10px] hover:scale-105 hover:text-[#6366f1]",onClick:s.addInputGroup},{default:a(()=>[Qe,Xe]),_:1},8,["disabled","onClick"])]),(o(!0),m(b,null,V(s.tempAdminVenue.transportation,(l,r)=>{var A;return o(),m("div",{key:r,class:"flex flex-col items-start gap-2 pt-3"},[t(e(f),{for:`transportation_type_${r}`,class:"text-left"},{default:a(()=>[n("類型")]),_:2},1032,["for"]),t(e(p),{type:"text",rules:"required",class:"form-field",modelValue:l.type,"onUpdate:modelValue":y=>l.type=y,name:`transportation_type_${r}`},null,8,["modelValue","onUpdate:modelValue","name"]),t(e(_),{name:`transportation_type_${r}`,class:"errorText",style:{"padding-left":"0px !important"}},null,8,["name"]),t(e(f),{for:`transportation_info_${r}`,class:"text-left"},{default:a(()=>[n("內容")]),_:2},1032,["for"]),t(e(p),{name:`transportation_info_${r}`,rules:"required",modelValue:l.info,"onUpdate:modelValue":y=>l.info=y},{default:a(({field:y})=>[d("textarea",q({type:"text",rows:"3",cols:"48",class:"border border-[hsl(var(--input))] rounded-md focus-visible:outline-black focus-visible:rounded-[10px] p-3 text-sm"},y),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"]),t(e(_),{name:`transportation_info_${r}`,class:"errorText",style:{"padding-left":"0px !important"}},null,8,["name"]),r+1!==((A=s.tempAdminVenue)==null?void 0:A.transportation.length)?(o(),m("span",Ye,"/")):S("",!0)])}),128))])])]),t(e(se),null,{default:a(()=>[t(e(ue),null,{default:a(()=>[t(e(g),{variant:"outline",class:"px-6"},{default:a(()=>[n("取消")]),_:1})]),_:1}),t(e(g),{type:"submit"},{default:a(()=>[n("送出")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}))}}),et={class:"grid grid-cols-4 gap-2 mt-36 mb-6"},tt={class:"col-span-4 sm:col-span-2 md:col-span-1 relative"},at=d("span",{class:"material-symbols-outlined absolute top-0 right-0 pe-3 py-1 text-gray-600"}," search ",-1),st={class:"col-span-4 xs:col-span-2 md:col-span-1"},lt={class:"flex gap-2"},it={key:0,class:"text-primary tracking-wider text-lg"},nt=d("label",{for:"venueItem",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},null,-1),dt=d("span",{class:"material-symbols-outlined"},"edit",-1),ot=d("span",{class:"material-symbols-outlined"},"delete",-1),rt={data(){return{deleteTitle:[],deleteArray:[]}},components:{VenueModal:Y},methods:{handelCheckList(u,s){const i=this.deleteArray.indexOf(u);i!==-1?(this.deleteArray.splice(i,1),this.deleteTitle.splice(s,1)):(this.deleteArray.push(u),this.deleteTitle.push(s))},openDialog(u){u?(this.isModalOpen=!0,this.isNew=!1,this.getAdminSingleVenue(u)):(this.isNew=!0,this.tempAdminVenue={seat_areas:[],transportation:[{type:"",info:""}]})},...L(v,["getAdminVenues","deleteVenue"])},computed:{...F(v,["adminVenues","adminCityOptions"]),...G(v,["adminCity","adminSearchText","isModalOpen","isNew","tempAdminVenue","getAdminSingleVenue"])},watch:{adminSearchText:"getAdminVenues",adminCity:"getAdminVenues"},mounted(){this.getAdminVenues()},unmounted(){this.adminCity="",this.adminSearchText=""}},vt=Object.assign(rt,{__name:"AdminVenuesView",setup(u){return(s,i)=>(o(),m("main",null,[d("nav",et,[d("div",tt,[t(e(R),{type:"text",placeholder:"輸入場地名稱",modelValue:s.adminSearchText,"onUpdate:modelValue":i[0]||(i[0]=l=>s.adminSearchText=l)},null,8,["modelValue"]),at]),d("div",st,[t(e(W),{modelValue:s.adminCity,"onUpdate:modelValue":i[1]||(i[1]=l=>s.adminCity=l)},{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(H),{placeholder:"地區"})]),_:1}),t(e(J),null,{default:a(()=>[t(e(Q),null,{default:a(()=>[t(e(X),{class:"tracking-wide"},{default:a(()=>[n("地區")]),_:1}),t(e(C),{value:"全部"},{default:a(()=>[n(" 全部 ")]),_:1}),(o(!0),m(b,null,V(s.adminCityOptions,l=>(o(),c(e(C),{key:l,value:l},{default:a(()=>[n(h(l),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),d("div",lt,[t(e(ne),{open:s.isModalOpen,"onUpdate:open":i[3]||(i[3]=l=>s.isModalOpen=l)},{default:a(()=>[t(e(ie),{"as-child":""},{default:a(()=>[t(e(g),{variant:"outline",onClick:i[2]||(i[2]=l=>s.openDialog()),class:"bg-primary text-white hover:bg-[#6366f1] hover:text-white text-sm"},{default:a(()=>[n(" 新增場地 ")]),_:1})]),_:1}),t(Y)]),_:1},8,["open"]),t(e(D),null,{default:a(()=>[t(e(z),{"as-child":""},{default:a(()=>[t(e(g),{disabled:s.deleteArray.length===0,variant:"outline",class:"bg-primary text-white hover:bg-[#6366f1] hover:text-white text-sm"},{default:a(()=>[n(" 刪除多筆資料 ")]),_:1},8,["disabled"])]),_:1}),t(e(O),null,{default:a(()=>[t(e(M),null,{default:a(()=>[t(e(I),null,{default:a(()=>[n("確定要刪除以下場地?")]),_:1}),t(e(N))]),_:1}),(o(!0),m(b,null,V(s.deleteTitle,(l,r)=>(o(),m("div",{key:r,class:"text-black"},h(l),1))),128)),t(e(j),null,{default:a(()=>[t(e(E),{class:"bg-black-60"},{default:a(()=>[n("取消")]),_:1}),t(e(B),{class:"text-black-100 bg-tiffany",onClick:i[4]||(i[4]=l=>s.deleteVenue(s.deleteArray,"multiple"))},{default:a(()=>[n("確定")]),_:1})]),_:1})]),_:1})]),_:1})])]),s.adminVenues.length===0?(o(),m("p",it,"oops! 搜尋不到相關資料 ╮(′～‵〞)╭")):(o(),c(e(me),{key:1,class:"bg-white rounded-lg text-md mb-3"},{default:a(()=>[t(e(oe),null,{default:a(()=>[t(e(P),{class:"hover:bg-white text-nowrap",style:{color:"black !important"}},{default:a(()=>[t(e(k)),t(e(k),null,{default:a(()=>[n("名稱")]),_:1}),t(e(k),null,{default:a(()=>[n("地區")]),_:1}),t(e(k),null,{default:a(()=>[n("座位區分類")]),_:1}),t(e(k))]),_:1})]),_:1}),t(e(re),{class:"text-gray-600"},{default:a(()=>[(o(!0),m(b,null,V(s.adminVenues,l=>(o(),c(e(P),{key:l.id},{default:a(()=>[t(e($),{class:"text-purple-primary"},{default:a(()=>[t(e(de),{id:"venueItem",onClick:r=>s.handelCheckList(l.id,l.title)},null,8,["onClick"]),nt]),_:2},1024),t(e($),{class:"text-purple-primary"},{default:a(()=>[n(h(l.title),1)]),_:2},1024),t(e($),null,{default:a(()=>[n(h(l.city),1)]),_:2},1024),t(e($),null,{default:a(()=>{var r;return[n(h((r=l.seat_areas)==null?void 0:r.join("、")),1)]}),_:2},1024),t(e($),{class:"text-right"},{default:a(()=>[t(e(g),{variant:"none",onClick:r=>s.openDialog(l.id),class:"hover:text-[#6366f1]"},{default:a(()=>[dt]),_:2},1032,["onClick"]),t(e(D),null,{default:a(()=>[t(e(z),{"as-child":""},{default:a(()=>[t(e(g),{variant:"none",class:"hover:text-[#6366f1]",disabled:l.id<=6},{default:a(()=>[ot]),_:2},1032,["disabled"])]),_:2},1024),t(e(O),null,{default:a(()=>[t(e(M),null,{default:a(()=>[t(e(I),null,{default:a(()=>[n("確定要刪除 "+h(l.title)+" ?",1)]),_:2},1024)]),_:2},1024),t(e(N),null,{default:a(()=>[n("一旦刪除後就無法恢復摟～")]),_:1}),t(e(j),null,{default:a(()=>[t(e(E),null,{default:a(()=>[n("取消")]),_:1}),t(e(B),{onClick:r=>s.deleteVenue(l.id,"single")},{default:a(()=>[n("確定")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]))}});export{vt as default};
