import{t as p,o as u,s as r,_ as l}from"./vee-validate-zod.esm-Vw6gITJl.js";import{u as d}from"./vee-validate.esm-IiV4QuYU.js";import{K as h,L as _,e as f,y as g,M as S,N as k,o as y}from"./index-4vfiGRLw.js";import"./CardTitle-WVyb6SDx.js";import"./CardDescription-bVRxiQWQ.js";import"./CardContent-13BgCpgc.js";import"./CardFooter-6jnw0ird.js";import"./Label-LlZcrtlr.js";import"./PopoverContent-wWwfq-Lx.js";const $={__name:"LoginView",setup(T){const{toast:e}=h(),s=_(),n=p(u({email:r({required_error:"必填"}).email("信箱格式不正確"),password:r({required_error:"必填"})})),a=d({validationSchema:n}),i=t=>{S.post(k.login,t).then(o=>{const{data:m}=o.data;document.cookie=`AccessToken=${m.access_token}; path=/`,localStorage.setItem("user",JSON.stringify(o.data.data.user)),e({title:"登入成功"}),s.push("/member")}).catch(()=>{e({title:"登入失敗，請再次確認資料是否正確。"})})},c=a.handleSubmit(t=>{i(t),a.resetForm()});return(t,o)=>(y(),f(l,{defaultPage:"login",onMethod:g(c)},null,8,["onMethod"]))}};export{$ as default};
