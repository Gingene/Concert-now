import{K as F,y as C,z as w,c as u,b as t,w as s,a as c,C as v,u as e,F as f,r as h,ae as x,o,E as n,B as m,g as d,t as _,h as k,ao as T,ag as z,ah as R,ai as j,aj as N,ak as V,al as q,am as M,an as Y,aA as D,ap as E,aq as L,ar as U,d as y}from"./index-YQxMthNK.js";import{a as O,b as P,_ as J}from"./CardTitle-fFpfDCbz.js";import{_ as K}from"./CardDescription-uvCdQvf-.js";import{_ as Z}from"./CardFooter-qsfALNnh.js";import{_ as G,a as H,b as Q,c as W,d as X}from"./PaginationPrev-m3oybA42.js";import{_ as ee}from"./BannerComponent-otXpaKNX.js";import{_ as te}from"./index-g1Dhl3Xc.js";import{u as B}from"./concerts-HWDsd376.js";import{h as S}from"./moment-WSJ9un1t.js";import{a as se}from"./aos-IuaIc8Jl.js";import"./more-horizontal-B0LHj9Iw.js";const ae={class:"container relative pb-[128px] lg:pb-[192px]"},le={class:"space-y-6 lg:space-y-14 pb-5 lg:pb-12 border-b-2 border-black-40"},oe={class:"space-y-4 space-x-4 space-x-reverse -m-1 p-1"},ne={class:"space-y-4 space-x-4 space-x-reverse -m-1 p-1"},ie={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6"},re=["src","alt"],ce={class:"text-tiny text-black-60"},ue={class:"absolute pt-1 md:pt-2 pb-4 text-black-60 text-tiny"},de=["onClick"],me={key:0},_e=c("span",{class:"text-sm"},"查看更多",-1),{toast:fe}=F(),pe={data(){return{bannerInputPlaceholder:"輸入演唱會名稱",timeRanges:["本日","本週","本月"],countryRanges:["台灣","日本","韓國","歐美","其它"],timeButtonIsActive:"stateAll",countryButtonIsActive:"stateAll"}},inject:["http","path"],methods:{...C(B,["getAllConcerts","getFilterConcerts","callSaveAction","searchConcerts"]),...C(x,["getUserSavedAndFollowed"]),showToast($){fe({title:$})}},computed:{...w(B,["concerts","pagination","toastActive","pagination"]),...w(x,["AccessToken","savedConcerts"]),isSaved(){return[...this.savedConcerts]}},mounted(){se.init(),this.getAllConcerts(),this.AccessToken!==void 0&&this.getUserSavedAndFollowed()}},Be=Object.assign(pe,{__name:"ConcertsView",setup($){return(l,p)=>{const b=y("router-link"),g=y("font-awesome-icon"),I=y("RouterLink");return o(),u("section",ae,[t(ee,{"prop-placeholder":l.bannerInputPlaceholder,onSearchMethod:l.searchConcerts},{mainTitle:s(()=>[n("CONCERTS")]),_:1},8,["prop-placeholder","onSearchMethod"]),c("main",le,[c("div",null,[c("div",oe,[t(e(m),{variant:"tiffany-outline",size:"base",class:v(["me-4",{active:l.timeButtonIsActive==="stateAll"}]),onClick:p[0]||(p[0]=a=>{l.getFilterConcerts("time","all"),l.timeButtonIsActive="stateAll"})},{default:s(()=>[n(" 全部 ")]),_:1},8,["class"]),(o(!0),u(f,null,h(l.timeRanges,(a,i)=>(o(),d(e(m),{key:a,variant:"tiffany-outline",size:"base",class:v({active:l.timeButtonIsActive===`state${i}`}),onClick:r=>{l.getFilterConcerts("time",a),l.timeButtonIsActive=`state${i}`}},{default:s(()=>[n(_(a),1)]),_:2},1032,["class","onClick"]))),128))]),c("div",ne,[t(e(m),{variant:"pink-outline",size:"base",class:v(["me-4",{active:l.countryButtonIsActive==="stateAll"}]),onClick:p[1]||(p[1]=a=>{l.getFilterConcerts("country","all"),l.countryButtonIsActive="stateAll"})},{default:s(()=>[n(" 全部 ")]),_:1},8,["class"]),(o(!0),u(f,null,h(l.countryRanges,(a,i)=>(o(),d(e(m),{key:a,variant:"pink-outline",size:"base",class:v({active:l.countryButtonIsActive===`state${i}`}),onClick:r=>{l.getFilterConcerts("country",a),l.countryButtonIsActive=`state${i}`}},{default:s(()=>[n(_(a),1)]),_:2},1032,["class","onClick"]))),128))])]),c("ul",ie,[(o(!0),u(f,null,h(l.concerts,a=>(o(),u("li",{key:a.id},[t(e(J),{class:"border-black-80"},{default:s(()=>[t(e(O),{class:"rounded-t-2xl space-y-0 p-0"},{default:s(()=>[t(b,{to:`/concerts/${a.id}`},{default:s(()=>[c("img",{src:a.cover_urls.square,alt:a.title,class:"brightness-90 aspect-square rounded-2xl object-cover min-w-full"},null,8,re)]),_:2},1032,["to"]),t(e(K),{class:"h-[8rem] sm:h-[10rem] md:h-[13rem] lg:h-[12rem] border-x-2 pt-6 px-6 border-black-80 flex justify-between align-top"},{default:s(()=>{var i;return[c("div",null,[c("p",ce,[n(_(a.holding_time.substring(0,10))+" ",1),e(S).duration(e(S)(a.holding_time,"YYYY-MM-DD hh:mm:ss").diff()).minutes()<=0?(o(),d(e(te),{key:0,class:"ml-1 bg-black-85 hover:bg-black-85"},{default:s(()=>[n("已結束")]),_:1})):k("",!0)]),t(b,{to:`/concerts/${a.id}`},{default:s(()=>[t(e(P),{class:"text-base lg:text-lg text-white"},{default:s(()=>[n(_(a.title),1)]),_:2},1024)]),_:2},1032,["to"]),c("p",ue,_((i=a.venue)==null?void 0:i.title),1)]),l.AccessToken!==void 0?(o(),u("button",{key:0,onClick:r=>l.callSaveAction(a.id),class:"flex ml-auto"},[l.isSaved.some(r=>r.id===a.id)?(o(),d(g,{key:0,icon:"fa-solid fa-bookmark",class:"text-3xl ml-4 text-[var(--pink)] hover:translate-y-[-.25rem]"})):(o(),d(g,{key:1,icon:"fa-regular fa-bookmark",class:"text-3xl ml-4 text-[var(--pink)] hover:translate-y-[-.25rem]"}))],8,de)):k("",!0),t(e(T),null,{default:s(()=>[t(e(z),{class:"flex"},{default:s(()=>[l.AccessToken===void 0?(o(),u("button",me,[t(g,{icon:"fa-regular fa-bookmark",class:"text-3xl ml-4 text-[var(--pink)] hover:translate-y-[-.25rem]"})])):k("",!0)]),_:1}),t(e(R),null,{default:s(()=>[t(e(j),null,{default:s(()=>[t(e(N),null,{default:s(()=>[n("登入才能收藏 ᓫ(°⌑°)ǃ")]),_:1}),t(e(V))]),_:1}),t(e(q),null,{default:s(()=>[t(e(M),null,{default:s(()=>[n("取消")]),_:1}),t(e(Y),{asChild:""},{default:s(()=>[t(b,{to:"/login"},{default:s(()=>[n(" 前往登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]}),_:2},1024)]),_:2},1024),t(e(Z),{class:"text-end border-x-2 border-b-2 border-black-80 rounded-b-2xl"},{default:s(()=>[t(I,{to:`/concerts/${a.id}`},{default:s(()=>[t(e(m),{variant:"white-outline",size:"base2",class:"border-black-80 hover:border-white"},{default:s(()=>[_e,t(e(D),{class:"size-6 ms-2 lg:ms-4"})]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]))),128))]),t(e(U),{total:l.pagination.total_pages*10,"sibling-count":1,"show-edges":"","default-page":1},{default:s(({page:a})=>[t(e(E),{class:"flex items-center justify-center gap-1 pt-16"},{default:s(({items:i})=>[t(e(G)),t(e(H)),(o(!0),u(f,null,h(i,(r,A)=>(o(),u(f,null,[r.type==="page"?(o(),d(e(L),{key:A,value:r.value,"as-child":""},{default:s(()=>[t(e(m),{class:"w-10 h-10 p-0",variant:r.value===a?"default":"outline"},{default:s(()=>[n(_(r.value),1)]),_:2},1032,["variant"])]),_:2},1032,["value"])):(o(),d(e(Q),{key:r.type,index:A},null,8,["index"]))],64))),256)),t(e(W)),t(e(X))]),_:2},1024)]),_:1},8,["total"])])])}}});export{Be as default};
