import{K as A,a5 as $,y as x,x as B,a6 as P,a7 as T,c as d,a as r,b as e,w as i,F as f,r as m,g as h,f as b,z as s,a8 as S,a9 as j,o as n,G as _,D,t as u,aa as I,ab as V,ac as W,ad as L,ae as M,af as N,ag as z,ah as R,ai as q,aj as E,C as G,ak as J,al as K,d as F}from"./index-OA7eRsB3.js";import{_ as O}from"./BannerComponent-oGW9_gSd.js";import{_ as U,a as Z,b as H,c as Q,d as X}from"./PaginationPrev-jdR4-KAq.js";import{u as Y}from"./artists-23FA8yQu.js";import"./more-horizontal-NDUN34PH.js";const tt={class:"container relative pb-[128px] lg:pb-[192px]"},at={class:"grid grid-flow-col"},et={class:"mb-4 lg:mb-14 mt-4"},st={class:"w-full flex flex-wrap gap-4"},ot=["onClick"],lt={key:0,class:"p-14 font-semibold tracking-tighter text-base lg:text-lg text-white text-center"},it={class:"w-[100%] mx-auto grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"},nt=["src","alt"],rt={class:"ml-4"},ct={class:"text-base lg:text-lg"},dt={class:"flex gap-3"},ut={class:"text-tiny text-black-40"},_t={class:"text-tiny text-black-60 hidden xs:block"},ft={class:"text-tiny text-black-60 block xs:hidden"},ht={key:0,class:"basic-follow tiffany-outline text-base hover:translate-y-[-.25rem]"},pt=["onClick"],gt=r("hr",{class:"border-b-2 border-black-40"},null,-1),{toast:mt}=A(),{setIsLoading:p}=$(),bt={data(){return{activeFilterCountry:"",isFollowActive:{},bannerInputPlaceholder:"輸入表演者名稱",searchPage:1,aristData:{artists:[],searchWord:"",pagination:{},param:""},countries:[{id:1,location:"全部"},{id:2,location:"台灣"},{id:3,location:"日本"},{id:4,location:"韓國"},{id:5,location:"歐美"},{id:6,location:"其它"}]}},computed:{...x(S,["AccessToken"])},methods:{...B(Y,["postFollowConcetsData","deleteFollowConcetsData"]),async toggleFollowArtists(o,t){o?this.handleFollowAction(t,"刪除","刪除追蹤成功"):this.handleFollowAction(t,"新增","追蹤成功")},async getArtistsData(o=1){try{const t=await P(o);this.aristData.artists=t.data.data,this.aristData.pagination=t.data.pagination}catch(t){console.error(t)}},FilterByCountry(o="全部"){this.activeFilterCountry=o,o==="全部"?this.aristData.param="":this.aristData.param=o,p(),this.searchArtists(this.aristData.searchWord),setTimeout(()=>{p()},500)},FilterByPage(o){p(),this.searchArtists(this.aristData.searchWord,o),setTimeout(()=>{p()},500)},searchArtists:T(async function(o,t=1){this.aristData.searchWord=o,this.searchPage=t;try{const l=await j(this.aristData.searchWord,this.aristData.param,t);this.aristData.artists=l.data.data,this.aristData.pagination=l.data.pagination}catch(l){console.error(l)}},300),handleFollowAction(o,t,l){(t==="新增"?this.postFollowConcetsData:this.deleteFollowConcetsData)(o).then(()=>this.getArtistsData()).then(()=>{setTimeout(()=>this.toastMsg(l),300)})},toastMsg(o){mt({title:o,description:""})}},mounted(){this.getArtistsData(),this.FilterByCountry()}},Ct=Object.assign(bt,{__name:"ArtistsView",setup(o){return(t,l)=>{var k,w;const y=F("RouterLink"),C=F("router-link");return n(),d("main",tt,[r("section",at,[e(O,{"prop-placeholder":t.bannerInputPlaceholder,onSearchMethod:t.searchArtists},{mainTitle:i(()=>[_("ARTISTS")]),_:1},8,["prop-placeholder","onSearchMethod"])]),r("section",et,[r("div",st,[(n(!0),d(f,null,m(t.countries,a=>(n(),d("button",{class:D(["basic",[t.activeFilterCountry===a.location?"pink-fill":"pink-outline"]]),onClick:g=>t.FilterByCountry(a.location),key:a.id},u(a.location),11,ot))),128))])]),r("section",null,[(k=t.aristData.artists)!=null&&k.length?h("",!0):(n(),d("p",lt,"抱歉，搜尋不到相關資源")),r("ul",it,[(n(!0),d(f,null,m(t.aristData.artists,a=>(n(),d("li",{key:a.id,class:"flex flex-row justify-between items-center px-4 py-3 md:border-2 border-black-80 rounded-2xl"},[e(y,{to:`/artists/${a.id}`,class:"w-[81%] flex items-center"},{default:i(()=>[r("img",{class:"size-[70px] object-cover rounded-full",src:a.cover_urls.square,alt:a.name},null,8,nt),r("div",rt,[r("p",ct,u(a.name),1),r("div",dt,[r("p",ut,u(a.follower_count)+" 位粉絲",1),r("p",_t,u(a.concert_count)+" 場演唱會",1)]),r("p",ft,u(a.concert_count)+" concerts",1)])]),_:2},1032,["to"]),e(s(q),null,{default:i(()=>[e(s(I),{class:"flex"},{default:i(()=>[t.AccessToken?h("",!0):(n(),d("button",ht,"Follow"))]),_:1}),e(s(V),null,{default:i(()=>[e(s(W),null,{default:i(()=>[e(s(L),null,{default:i(()=>[_("請登入後追蹤")]),_:1}),e(s(M))]),_:1}),e(s(N),null,{default:i(()=>[e(s(z),null,{default:i(()=>[_("取消")]),_:1}),e(s(R),{asChild:""},{default:i(()=>[e(C,{to:"/login"},{default:i(()=>[_(" 前往登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t.AccessToken?(n(),d("button",{key:a==null?void 0:a.id,class:D(["basic-follow text-base hover:translate-y-[-.25rem]",a.is_followed?"tiffany-follow":"tiffany-outline"]),onClick:g=>t.toggleFollowArtists(a.is_followed,a.id)},u(a.is_followed?"Following":"Follow"),11,pt)):h("",!0)]))),128))])]),(w=t.aristData.artists)!=null&&w.length?(n(),b(s(K),{key:0,page:t.searchPage,total:t.aristData.pagination.total_pages*10,"sibling-count":1,"show-edges":"","default-page":1,class:"flex justify-center my-5 lg:my-12 pt-16"},{default:i(({page:a})=>[e(s(J),{class:"flex items-center gap-1"},{default:i(({items:g})=>[e(s(U),{onClick:l[0]||(l[0]=c=>t.FilterByPage(1))}),e(s(Z),{onClick:l[1]||(l[1]=c=>t.FilterByPage(t.aristData.pagination.current_page-1))}),(n(!0),d(f,null,m(g,(c,v)=>(n(),d(f,null,[c.type==="page"?(n(),b(s(E),{key:v,value:c.value,"as-child":""},{default:i(()=>[e(s(G),{class:"w-10 h-10 p-0",variant:c.value===a?"default":"outline",onClick:yt=>t.FilterByPage(c.value),disabled:c.value===a},{default:i(()=>[_(u(c.value),1)]),_:2},1032,["variant","onClick","disabled"])]),_:2},1032,["value"])):(n(),b(s(H),{key:c.type,index:v},null,8,["index"]))],64))),256)),e(s(Q),{onClick:l[2]||(l[2]=c=>t.FilterByPage(t.aristData.pagination.current_page+1))}),e(s(X),{onClick:l[3]||(l[3]=c=>t.FilterByPage(t.aristData.pagination.total_pages))})]),_:2},1024)]),_:1},8,["page","total"])):h("",!0),gt])}}});export{Ct as default};
