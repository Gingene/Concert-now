import{a5 as r,aq as c,M as n,N as i,a7 as o,b4 as u,b1 as h}from"./index--T_9Bc3L.js";const{setIsLoading:s}=r(),m=c("venues",{state:()=>({venueInfo:[],venues:[],venue:{},adminVenues:[],adminSearchText:"",adminCity:"",adminCityOptions:"",pagination:{},seatArea:"",searchText:"",city:"",searchPage:1}),actions:{getVenueInfo(){n.get(`${i.venues}?comments=1`).then(e=>{this.venueInfo=e.data.data}).catch(e=>{console.error(e)})},getVenues(e=1){s(),n.get(`${i.venues}?page=${e}`).then(t=>{window.scroll(0,0),this.venues=t.data.data,this.pagination=t.data.pagination}).catch(t=>{console.error(t)}).finally(()=>{s()})},getVenuesByCity(e){this.city=e,this.page=1,s(),this.searchVenues(this.searchText,1),setTimeout(()=>{s()},500)},getVenuesByPage(e){s(),this.searchVenues(this.searchText,e),setTimeout(()=>{s()},600)},getVenue(e){s(),n.get(`${i.venues}/${e}`).then(t=>{this.venue=t.data.data}).catch(t=>{console.error(t)}).finally(()=>{setTimeout(()=>{s()},100)})},searchVenues:o(function(e,t=1){this.searchText=e,this.searchPage=t,n.get(`${i.venues}/?q=${e}&city=${this.city}&page=${t}`).then(a=>{this.venues=a.data.data,this.pagination=a.data.pagination}).catch(a=>{console.error(a)})},300),resetState(){this.searchText="",this.city="",this.searchPage=1},reportUser(e){u({title:`已檢舉該使用者${e}`,description:""})},getAdminVenues(){s(),n.get(`${h.venues}?page=1`).then(e=>{this.adminVenues=e.data.data,this.adminCityOptions=[...new Set(e.data.data.map(t=>t.city))]}).catch(e=>{console.error(e)}).finally(()=>{s()})},searchAdminVenues:o(function(e,t=""){this.adminSearchText=e,this.adminCity=t,n.get(`${h.venues}/?q=${e}&city=${this.adminCity}&page=1`).then(a=>{this.adminVenues=a.data.data}).catch(a=>{console.error(a)})},300)},getters:{filterSeatComment(){return this.seatArea==="all"||this.seatArea===""?this.venue.comments:this.venue.comments.filter(e=>e.seat_area===this.seatArea)},transportation(){var e;return(e=this.venue.transportation)==null?void 0:e.map((t,a)=>({...t,value:`item-${a+1}`}))}}});export{m as u};
