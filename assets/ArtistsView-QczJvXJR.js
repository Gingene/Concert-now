import{K as C,ab as D,z as A,y as $,ac as B,ad as x,c as d,a as n,b as s,w as l,F as f,r as m,u as e,ae as T,af as S,o as r,E as _,C as w,t as u,ag as P,h as k,ah as j,ai as I,aj as V,ak as W,al as L,am as M,an as N,ao as q,ap as z,g as b,B as R,aq as E,ar as J,d as v}from"./index-OrsFlzd2.js";import{_ as K}from"./BannerComponent--gPmL3Rh.js";import{_ as O,a as U,b as Z,c as G,d as H}from"./PaginationPrev-iwZ4-BSA.js";import{u as Q}from"./artists-i_IQdxKI.js";import"./more-horizontal-nsEo2umJ.js";const X={class:"container relative pb-[128px] lg:pb-[192px]"},Y={class:"grid grid-flow-col"},tt={class:"mb-4 lg:mb-14 mt-4"},at={class:"w-full flex flex-wrap gap-4"},st=["onClick"],et={class:"w-[100%] mx-auto grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"},ot=["src","alt"],lt={class:"ml-4"},it={class:"text-base lg:text-lg"},nt={class:"flex gap-3"},rt={class:"text-tiny text-black-40"},ct={class:"text-tiny text-black-60"},dt={key:0,class:"hover:translate-y-[-.25rem] basic-follow text-sm tiffany-outline"},ut=["onClick"],_t=n("hr",{class:"border-b-2 border-black-40"},null,-1),{toast:ft}=C(),{setIsLoading:p}=D(),pt={data(){return{activeFilterCountry:"",isFollowActive:{},bannerInputPlaceholder:"輸入表演者名稱",aristData:{artists:[],searchWord:"",pagination:{},param:""},countries:[{id:1,location:"全部"},{id:2,location:"台灣"},{id:3,location:"日本"},{id:4,location:"韓國"},{id:5,location:"歐美"},{id:6,location:"其它"}]}},computed:{...A(T,["AccessToken"])},methods:{...$(Q,["postFollowConcetsData","deleteFollowConcetsData"]),async toggleFollowArtists(o,t){o?this.handleFollowAction(t,"刪除","刪除追蹤成功"):this.handleFollowAction(t,"新增","追蹤成功")},async getArtistsData(o=1){try{const t=await B(o);this.aristData.artists=t.data.data,this.aristData.pagination=t.data.pagination}catch(t){console.error(t)}},FilterByCountry(o="全部"){this.activeFilterCountry=o,o==="全部"?this.aristData.param="":this.aristData.param=o,p(),this.searchArtists(this.aristData.searchWord),setTimeout(()=>{p()},500)},FilterByPage(o){p(),this.searchArtists(this.aristData.searchWord,o),setTimeout(()=>{p()},500)},searchArtists:x(async function(o,t=1){this.aristData.searchWord=o;try{const i=await S(this.aristData.searchWord,this.aristData.param,t);this.aristData.artists=i.data.data}catch(i){console.error(i)}},300),handleFollowAction(o,t,i){(t==="新增"?this.postFollowConcetsData:this.deleteFollowConcetsData)(o).then(()=>this.getArtistsData()).then(()=>{setTimeout(()=>this.toastMsg(i),300)})},toastMsg(o){ft({title:o,description:""})}},mounted(){this.getArtistsData(),this.FilterByCountry()}},bt=Object.assign(pt,{__name:"ArtistsView",setup(o){return(t,i)=>{const g=v("RouterLink"),F=v("router-link");return r(),d("section",X,[n("div",Y,[s(K,{"prop-placeholder":t.bannerInputPlaceholder,onSearchMethod:t.searchArtists},{mainTitle:l(()=>[_("ARTISTS")]),_:1},8,["prop-placeholder","onSearchMethod"])]),n("div",tt,[n("div",at,[(r(!0),d(f,null,m(t.countries,a=>(r(),d("button",{class:w(["basic",[t.activeFilterCountry===a.location?"pink-fill":"pink-outline"]]),onClick:h=>t.FilterByCountry(a.location),key:a.id},u(a.location),11,st))),128))])]),n("div",null,[n("ul",et,[(r(!0),d(f,null,m(t.aristData.artists,a=>(r(),d("li",{key:a.id,class:"flex flex-row justify-between items-center px-4 py-3 md:border-2 border-black-80 rounded-2xl"},[s(g,{to:`/artists/${a.id}`,class:"w-[81%] flex items-center"},{default:l(()=>[n("img",{class:"size-[70px] object-cover rounded-full",src:a.cover_urls.square,alt:a.name},null,8,ot),n("div",lt,[n("p",it,u(a.name),1),n("div",nt,[n("p",rt,u(a.follower_count)+" fans",1),n("p",ct,u(a.concert_count)+" concerts",1)])])]),_:2},1032,["to"]),s(e(q),null,{default:l(()=>[s(e(P),{class:"flex"},{default:l(()=>[t.AccessToken===void 0?(r(),d("button",dt,"Follow")):k("",!0)]),_:1}),s(e(j),null,{default:l(()=>[s(e(I),null,{default:l(()=>[s(e(V),null,{default:l(()=>[_("請登入後追蹤")]),_:1}),s(e(W))]),_:1}),s(e(L),null,{default:l(()=>[s(e(M),null,{default:l(()=>[_("取消")]),_:1}),s(e(N),{asChild:""},{default:l(()=>[s(F,{to:"/login"},{default:l(()=>[_(" 前往登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t.AccessToken!==void 0?(r(),d("button",{key:a.id,class:w(["hover:translate-y-[-.25rem] basic-follow text-sm",a.is_followed?"tiffany-follow":"tiffany-outline"]),onClick:h=>t.toggleFollowArtists(a.is_followed,a.id)},u(a.is_followed?"Following":"Follow"),11,ut)):k("",!0)]))),128))])]),s(e(J),{total:t.aristData.pagination.total_pages*10,"sibling-count":1,"show-edges":"","default-page":1,class:"flex justify-center my-5 lg:my-12 pt-16"},{default:l(({page:a})=>[s(e(z),{class:"flex items-center gap-1"},{default:l(({items:h})=>[s(e(O),{onClick:i[0]||(i[0]=c=>t.FilterByPage(1))}),s(e(U),{onClick:i[1]||(i[1]=c=>t.FilterByPage(t.aristData.pagination.current_page-1))}),(r(!0),d(f,null,m(h,(c,y)=>(r(),d(f,null,[c.type==="page"?(r(),b(e(E),{key:y,value:c.value,"as-child":""},{default:l(()=>[s(e(R),{class:"w-10 h-10 p-0",variant:c.value===a?"default":"outline",onClick:ht=>t.FilterByPage(c.value)},{default:l(()=>[_(u(c.value),1)]),_:2},1032,["variant","onClick"])]),_:2},1032,["value"])):(r(),b(e(Z),{key:c.type,index:y},null,8,["index"]))],64))),256)),s(e(G),{onClick:i[2]||(i[2]=c=>t.FilterByPage(t.aristData.pagination.current_page+1))}),s(e(H),{onClick:i[3]||(i[3]=c=>t.FilterByPage(t.aristData.pagination.total_pages))})]),_:2},1024)]),_:1},8,["total"]),_t])}}});export{bt as default};
