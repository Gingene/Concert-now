import{a9 as k,z as D,y as v,aa as C,ab as A,c as r,a as e,b as o,w as n,F as _,r as p,u as s,ac as x,ad as F,o as i,E as m,C as b,t as u,g,h as $,ae as B,B as S,af as T,ag as I,d as V}from"./index-VAeGz4pi.js";import{_ as W}from"./BannerComponent-BaFjlPho.js";import{a as j,b as L,_ as N}from"./HoverCardContent-hWpV24hP.js";import{_ as z,a as R,b as q,c as E,d as M}from"./PaginationPrev-FK0nUas7.js";import{u as P,a as J}from"./useDarkAlert-b0-vtthN.js";import"./more-horizontal--NAx5pB5.js";const O={class:"container relative pb-[128px] lg:pb-[192px]"},U={class:"grid grid-flow-col"},Z={class:"mb-4 lg:mb-14"},G={class:"w-full flex flex-wrap gap-4"},H=["onClick"],K={class:"w-[100%] mx-auto grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5"},Q=["src","alt"],X={class:"ml-4"},Y={class:"pr-3"},tt={class:"text-lg md:text-xl"},at={class:"text-sm text-black-60"},st={class:"text-sm text-black-60"},et=["onClick"],ot=e("hr",{class:"border-b-2 border-black-60"},null,-1),{setIsLoading:h}=k(),{swalWithStylingButtons:it}=P(),lt={data(){return{activeFilterCountry:"",isFollowActive:{},bannerInputPlaceholder:"請輸入表演者名稱",aristData:{artists:[],searchWord:"",pagination:{},param:""},countries:[{id:1,location:"全部"},{id:2,location:"日本"},{id:3,location:"韓國"},{id:4,location:"歐美"},{id:5,location:"其它"}]}},computed:{...D(x,["AccessToken"])},methods:{...v(J,["postFollowConcetsData","deleteFollowConcetsData"]),async toggleFollowArtists(l,t){if(!this.AccessToken){it.fire({title:"登入後才能用追蹤功能喔！",showCancelButton:!0,confirmButtonText:"前往登入"}).then(c=>{c.isConfirmed&&(window.location.href="login#/login")});return}if(l)this.deleteFollowConcetsData(t).then(()=>this.getArtistsData());else{this.postFollowConcetsData(t).then(()=>this.getArtistsData());return}},async getArtistsData(l=1){try{h();const t=await C(l);this.aristData.artists=t.data.data,this.aristData.pagination=t.data.pagination}catch(t){console.log(t)}finally{h()}},FilterByCountry(l="全部"){this.activeFilterCountry=l,l==="全部"?this.aristData.param="":this.aristData.param=l,h(),this.searchArtists(this.aristData.searchWord),setTimeout(()=>{h()},500)},searchArtists:A(async function(l,t=1){this.aristData.searchWord=l;try{const c=await F(this.aristData.searchWord,this.aristData.param,t);this.aristData.artists=c.data.data,console.log(this.aristData.artists)}catch(c){console.log(c)}},300)},mounted(){this.getArtistsData(),this.FilterByCountry()}},ht=Object.assign(lt,{__name:"ArtistsView",setup(l){return(t,c)=>{const y=V("RouterLink");return i(),r("section",O,[e("div",U,[o(W,{"prop-placeholder":t.bannerInputPlaceholder,onSearchMethod:t.searchArtists},{mainTitle:n(()=>[m("ARTISTS")]),_:1},8,["prop-placeholder","onSearchMethod"])]),e("div",Z,[e("div",G,[(i(!0),r(_,null,p(t.countries,a=>(i(),r("button",{class:b(["basic",[t.activeFilterCountry===a.location?"pink-fill":"pink-outline"]]),onClick:f=>t.FilterByCountry(a.location),key:a.id},u(a.location),11,H))),128))])]),e("div",null,[e("ul",K,[(i(!0),r(_,null,p(t.aristData.artists,a=>(i(),r("li",{key:a.id,class:"flex flex-row justify-between items-center p-2.5 md:border-[1px] border-black-60 rounded-2xl"},[o(y,{to:`/artists/${a.id}`,class:"w-[81%] flex items-center"},{default:n(()=>[e("img",{class:"size-[70px] object-cover rounded-full",src:a.cover_urls.square,alt:a.name},null,8,Q),e("div",X,[e("div",Y,[e("p",tt,u(a.name),1),e("p",at,u(a.follower_count)+" fans",1)]),e("p",st,u(a.concert_count)+" concerts",1)])]),_:2},1032,["to"]),o(s(N),null,{default:n(()=>[o(s(j),null,{default:n(()=>[(i(),r("button",{key:a.id,class:b(["basic text-base",a.is_followed?"tiffany-follow":"tiffany-outline"]),onClick:f=>t.toggleFollowArtists(a.is_followed,a.id)}," follow ",10,et))]),_:2},1024),t.AccessToken===void 0?(i(),g(s(L),{key:0},{default:n(()=>[m(" 請登入開啟追蹤功能 ")]),_:1})):$("",!0)]),_:2},1024)]))),128))])]),o(s(I),{total:t.aristData.pagination.total_pages,"sibling-count":1,"show-edges":"","default-page":1,class:"flex justify-center my-5 lg:my-12"},{default:n(({page:a})=>[o(s(B),{class:"flex items-center gap-1"},{default:n(({items:f})=>[o(s(z)),o(s(R)),(i(!0),r(_,null,p(f,(d,w)=>(i(),r(_,null,[d.type==="page"?(i(),g(s(T),{key:w,value:d.value,"as-child":""},{default:n(()=>[o(s(S),{class:"w-10 h-10 p-0",variant:d.value===a?"default":"outline"},{default:n(()=>[m(u(d.value),1)]),_:2},1032,["variant"])]),_:2},1032,["value"])):(i(),g(s(q),{key:d.type,index:w},null,8,["index"]))],64))),256)),o(s(E)),o(s(M))]),_:2},1024)]),_:1},8,["total"]),ot])}}});export{ht as default};
